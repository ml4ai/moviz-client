webpackJsonp([1],{"94D9":function(t,e){},D7MI:function(t,e){},Jmt5:function(t,e){},NHnr:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});r("Jmt5");var i=r("7+uW"),n={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"app"}},[e("router-view")],1)},staticRenderFns:[]};var a=r("VU/8")({name:"App"},n,!1,function(t){r("D7MI")},null,null).exports,o=r("/ocq"),l=r("Cx91"),s=r("mtWM"),h=r("fZjL"),d=r.n(h),c=r("BO1k"),u=r.n(c),g=r("Zrlr"),p=r.n(g),f=r("wxAW"),y=r.n(f),x=r("YVj4"),v=r("kvU2"),m=r.n(v);function b(t){var e=new x.graphlib.Graph({compound:!0});if(e.setGraph({}),e.setDefaultEdgeLabel(function(){return{}}),"bf"in t)for(var r=0;r<t.bf.length;r+=1){var i=t.bf[r],n="bf-"+r,a=i.name,o=i.function_type,l=i.value,s=i.body;e.setNode(n,{label:a,value:l,type:o,body:s});e.setNode("aux-"+n,{auxLabel:"aux",width:1,height:1})}if("pif"in t)for(var h=0;h<t.pif.length;h+=1){var d=t.pif[h],c="pif-"+h,u=d.name;e.setNode(c,{label:u,width:50,height:50}),e.setParent(c,"bf-"+(d.box-1))}if("pof"in t)for(var g=0;g<t.pof.length;g+=1){var p=t.pof[g],f="pof-"+g,y=p.name;e.setNode(f,{label:y,width:50,height:50}),e.setParent(f,"bf-"+(p.box-1))}if("opo"in t)for(var v=0;v<t.opo.length;v+=1){var m="opo-"+v,b=t.opo[v].name;e.setNode(m,{label:b,width:50,height:50})}if("opi"in t)for(var w=0;w<t.opi.length;w+=1){var N="opi-"+w,_=t.opi[w].name;e.setNode(N,{label:_,width:50,height:50})}if("wff"in t)for(var k=0;k<t.wff.length;k+=1){var E=t.wff[k],M="pif-"+(E.src-1),S="pof-"+(E.tgt-1);e.setEdge(M,S)}if("wfopi"in t)for(var z=0;z<t.wfopi.length;z+=1){var C=t.wfopi[z],L="pif-"+(C.src-1),T="opi-"+(C.tgt-1);e.setEdge(L,T)}if("wfopo"in t)for(var F=0;F<t.wfopo.length;F+=1){var R=t.wfopo[F],X="opo-"+(R.src-1),I="pof-"+(R.tgt-1);e.setEdge(X,I)}if("wopio"in t)for(var O=0;O<t.wopio.length;O+=1){var P=t.wopio[O],A="opo-"+(P.src-1),j="opi-"+(P.tgt-1);e.setEdge(A,j)}if("bc"in t)for(var B=0;B<t.bc.length;B+=1){var G=t.bc[B],U="bc-"+B,D=G.name,q=G.function_type,V=G.value,W=G.condition,H=G.body_if,J=G.body_else;e.setNode(U,{label:D,value:V,type:q,condition:W,body_if:H,body_else:J});e.setNode("aux-"+U,{auxLabel:"aux",width:1,height:1})}if("pic"in t)for(var Y=0;Y<t.pic.length;Y+=1){var Z=t.pic[Y],$="pic-"+Y,K=Z.name;e.setNode($,{label:K,width:50,height:50}),e.setParent($,"bc-"+(Z.box-1))}if("poc"in t)for(var Q=0;Q<t.poc.length;Q+=1){var tt=t.poc[Q],et="poc-"+Q,rt=tt.name;e.setNode(et,{label:rt,width:50,height:50}),e.setParent(et,"bc-"+(tt.box-1))}if("wfc"in t)for(var it=0;it<t.wfc.length;it+=1){var nt=t.wfc[it],at="pic-"+(nt.src-1),ot="pof-"+(nt.tgt-1);e.setEdge(at,ot)}if("wcf"in t)for(var lt=0;lt<t.wcf.length;lt+=1){var st=t.wcf[lt],ht="pif-"+(st.src-1),dt="poc-"+(st.tgt-1);e.setEdge(ht,dt)}if("wcc"in t)for(var ct=0;ct<t.wcc.length;ct+=1){var ut=t.wcc[ct],gt="pic-"+(ut.src-1),pt="poc-"+(ut.tgt-1);e.setEdge(gt,pt)}if("wcopi"in t)for(var ft=0;ft<t.wcopi.length;ft+=1){var yt=t.wcopi[ft],xt="pic-"+(yt.src-1),vt="opi-"+(yt.tgt-1);e.setEdge(xt,vt)}if("wcopo"in t)for(var mt=0;mt<t.wcopo.length;mt+=1){var bt=t.wcopo[mt],wt="opo-"+(bt.src-1),Nt="poc-"+(bt.tgt-1);e.setEdge(wt,Nt)}if("bl"in t)for(var _t=0;_t<t.bl.length;_t+=1){var kt=t.bl[_t],Et="bl-"+_t,Mt=kt.name,St=kt.function_type,zt=kt.value,Ct=kt.condition,Lt=kt.pre,Tt=kt.body,Ft=kt.post;e.setNode(Et,{label:Mt,value:zt,type:St,condition:Ct,pre:Lt,body:Tt,post:Ft});e.setNode("aux-"+Et,{auxLabel:"aux",width:1,height:1})}if("pil"in t)for(var Rt=0;Rt<t.pil.length;Rt+=1){var Xt=t.pil[Rt],It="pil-"+Rt,Ot=Xt.name;e.setNode(It,{label:Ot,width:50,height:50}),e.setParent(It,"bl-"+(Xt.box-1))}if("pol"in t)for(var Pt=0;Pt<t.pol.length;Pt+=1){var At=t.pol[Pt],jt="pol-"+Pt,Bt=At.name;e.setNode(jt,{label:Bt,width:50,height:50}),e.setParent(jt,"bl-"+(At.box-1))}if("wfl"in t)for(var Gt=0;Gt<t.wfl.length;Gt+=1){var Ut=t.wfl[Gt],Dt="pil-"+(Ut.src-1),qt="pof-"+(Ut.tgt-1);e.setEdge(Dt,qt)}if("wcl"in t)for(var Vt=0;Vt<t.wcl.length;Vt+=1){var Wt=t.wcl[Vt],Ht="pil-"+(Wt.src-1),Jt="poc-"+(Wt.tgt-1);e.setEdge(Ht,Jt)}if("wlopi"in t)for(var Yt=0;Yt<t.wlopi.length;Yt+=1){var Zt=t.wlopi[Yt],$t="pil-"+(Zt.src-1),Kt="opi-"+(Zt.tgt-1);e.setEdge($t,Kt)}if("wll"in t)for(var Qt=0;Qt<t.wll.length;Qt+=1){var te=t.wll[Qt],ee="pil-"+(te.src-1),re="pol-"+(te.tgt-1);e.setEdge(ee,re)}if("wlf"in t)for(var ie=0;ie<t.wlf.length;ie+=1){var ne=t.wlf[ie],ae="pif-"+(ne.src-1),oe="pol-"+(ne.tgt-1);e.setEdge(ae,oe)}if("wlc"in t)for(var le=0;le<t.wlc.length;le+=1){var se=t.wlc[le],he="pic-"+(se.src-1),de="pol-"+(se.tgt-1);e.setEdge(he,de)}if("wlopo"in t)for(var ce=0;ce<t.wlopo.length;ce+=1){var ue=t.wlopo[ce],ge="opo-"+(ue.src-1),pe="pol-"+(ue.tgt-1);e.setEdge(ge,pe)}if("pif"in t)for(var fe=0;fe<t.pif.length;fe+=1){var ye="pif-"+fe,xe="aux-bf-"+(t.pif[fe].box-1);e.predecessors(ye).length>0||e.setEdge(xe,ye)}if("pof"in t)for(var ve=0;ve<t.pof.length;ve+=1){var me="pof-"+ve,be="aux-bf-"+(t.pof[ve].box-1);e.successors(me).length>0||e.setEdge(me,be)}if("pic"in t)for(var we=0;we<t.pic.length;we+=1){var Ne="pic-"+we,_e="aux-bc-"+(t.pic[we].box-1);e.predecessors(Ne).length>0||e.setEdge(_e,Ne)}if("poc"in t)for(var ke=0;ke<t.poc.length;ke+=1){var Ee="poc-"+ke,Me="aux-bc-"+(t.poc[ke].box-1);e.successors(Ee).length>0||e.setEdge(Ee,Me)}if("pil"in t)for(var Se=0;Se<t.pil.length;Se+=1){var ze="pil-"+Se,Ce="aux-bl-"+(t.pil[Se].box-1);e.predecessors(ze).length>0||e.setEdge(Ce,ze)}if("pol"in t)for(var Le=0;Le<t.pol.length;Le+=1){var Te="pol-"+Le,Fe="aux-bl-"+(t.pol[Le].box-1);e.successors(Te).length>0||e.setEdge(Te,Fe)}e.nodes().filter(function(t){return t.startsWith("bf")}),e.nodes().filter(function(t){return t.startsWith("bc")}),e.nodes().filter(function(t){return t.startsWith("bl")}),e.nodes().filter(function(t){return t.startsWith("opo")}),e.nodes().filter(function(t){return t.startsWith("opi")});e.setGraph({ranksep:30,rankdir:"BT"}),x.layout(e),console.log(e);var Re={nodes:{},edges:[]};if(console.log(t),e.nodes().forEach(function(t){var r=e.node(t);Re.nodes[t]={x:r.x,y:r.y,width:r.width,height:r.height,label:r.label,type:r.type,value:r.value,body:r.body,condition:r.condition,body_if:r.body_if,body_else:r.body_else,pre:r.pre,post:r.post}}),e.edges().forEach(function(t,e){Re.edges.push({id:e,source:t.v,target:t.w})}),"bf"in t)for(var Xe=function(e){var r="bf-"+e;if("pif"in t&&"pof"in t){var i=t.pof.find(function(t){return t.box===e+1}),n=t.pif.find(function(t){return t.box===e+1});Re.nodes[r].fullBox=!(!i||!n)}else Re.nodes[r].fullBox=!1},Ie=0;Ie<t.bf.length;Ie+=1)Xe(Ie);if("bc"in t)for(var Oe=function(e){var r="bc-"+e;if("pic"in t&&"poc"in t){var i=t.poc.find(function(t){return t.box===e+1}),n=t.pic.find(function(t){return t.box===e+1});Re.nodes[r].fullBox=!(!i||!n)}else Re.nodes[r].fullBox=!1},Pe=0;Pe<t.bc.length;Pe+=1)Oe(Pe);if("bl"in t)for(var Ae=function(e){var r="bl-"+e;if("pil"in t&&"pol"in t){var i=t.pol.find(function(t){return t.box===e+1}),n=t.pil.find(function(t){return t.box===e+1});Re.nodes[r].fullBox=!(!i||!n)}else Re.nodes[r].fullBox=!1},je=0;je<t.bl.length;je+=1)Ae(je);return Re.meta={},Re.meta.name=t.b[0].name,Re.meta.identifier=t.b[0].function_type+"-"+t.b[0].metadata,Re.meta.type=t.b[0].function_type,Re}!function(){function t(e){var r=this;p()(this,t),this.parent={},e.forEach(function(t){return r.parent[t]=t})}y()(t,[{key:"find",value:function(t){return this.parent[t]!==t&&(this.parent[t]=this.find(this.parent[t])),this.parent[t]}},{key:"union",value:function(t,e){var r=this.find(t),i=this.find(e);r!==i&&(this.parent[i]=r)}}])}();var w=r("d7EF"),N=r.n(w),_=r("gRE1"),k=r.n(_),E=r("Gu7T"),M=r.n(E),S=r("mvHQ"),z=r.n(S);function C(t,e,r,i,n,a,o){var s=Number(l.g("#boxid"+i).select("#"+t).attr("x"))+Number(l.g("#boxid"+i).select("#"+t).attr("width")),h=Number(l.g("#boxid"+i).select("#"+t).attr("y"))+Number(l.g("#boxid"+i).select("#"+t).attr("height"))/2,d=Number(l.g("#"+e).attr("x"))+r[0],c=Number(l.g("#"+e).attr("x"))+r[0],u=Number(l.g("#"+e).attr("y"))+r[1],g=Number(l.g("#"+e).attr("y"))+Number(l.g("#"+e).attr("height"))+r[1],p=d-s,f=u-h,y=c-s,x=g-h,v={},m={},b={},w={};v.x=s+.375*p,v.y=h+.3*f,m.x=s+.75*.8*p,m.y=h+.75*f,b.x=s+.375*y,b.y=h+.3*x,w.x=s+.75*.8*y,w.y=h+.75*x,"down"===o&&(s=Number(l.g("#boxid"+i).select("#"+t).attr("x"))+Number(l.g("#boxid"+i).select("#"+t).attr("width"))/2,h=Number(l.g("#boxid"+i).select("#"+t).attr("y"))+Number(l.g("#boxid"+i).select("#"+t).attr("height")),d=Number(l.g("#"+e).attr("x"))+r[0],c=Number(l.g("#"+e).attr("x"))+r[0]+Number(l.g("#"+e).attr("width")),u=Number(l.g("#"+e).attr("y"))+r[1],g=Number(l.g("#"+e).attr("y"))+r[1],f=u-h,y=c-s,x=g-h,m={},b={},w={},(v={}).x=s+.375*(p=d-s),v.y=h+.3*f,m.x=s+.75*.8*p,m.y=h+.75*f,b.x=s+.375*y,b.y=h+.3*x,w.x=s+.75*.8*y,w.y=h+.75*x);var N=l.g("svg").select("#sumGroup").append("g").attr("id","line"+String(i)+"_"+String(n)).attr("class","drawer");N.attr("sourceid",t).attr("targetid",e).attr("locationTransform",r).attr("body_num_source",i).attr("body_num_target",n).attr("color",a);var _=[{x:s,y:h},{x:v.x,y:v.y},{x:m.x,y:m.y},{x:d,y:u+17}],k=[{x:s,y:h},{x:b.x,y:b.y},{x:w.x,y:w.y},{x:c,y:g-17}];"down"===o&&(_=[{x:s,y:h},{x:v.x,y:v.y},{x:m.x,y:m.y},{x:d+17,y:u}],k=[{x:s,y:h},{x:b.x,y:b.y},{x:w.x,y:w.y},{x:c-17,y:g}]),console.log(_,k);var E=l.e().x(function(t){return t.x}).y(function(t){return t.y}).curve(l.c),M=E(_),S=document.createElementNS("http://www.w3.org/2000/svg","path");S.setAttribute("d",M);var z=E(k),C=document.createElementNS("http://www.w3.org/2000/svg","path");C.setAttribute("d",z);for(var L=S.getTotalLength(),T=C.getTotalLength(),F=[],R=0;R<500;R++){var X=S.getPointAtLength(R*L/499);F.push({x:X.x,y:X.y})}for(var I=[],O=0;O<500;O++){var P=C.getPointAtLength(O*T/499);I.push({x:P.x,y:P.y})}var A=l.f().domain(l.d(_,function(t){return t.x})).range([0,p]),j=l.b(function(t){return t.x}).left,B=l.f().domain(l.d(k,function(t){return t.x})).range([0,p]),G=l.b(function(t){return t.x}).left;"down"===o&&(A=l.f().domain(l.d(_,function(t){return t.y})).range([0,f]),j=l.b(function(t){return t.y}).left,B=l.f().domain(l.d(k,function(t){return t.y})).range([0,f]),G=l.b(function(t){return t.y}).left);var U=l.a().x(function(t){return t.x}).y0(function(t){var e=t.x,r=j(F,A.invert(e));r>=F.length-1&&(r=F.length-2),r<1&&(r=1);var i=F[r-1],n=F[r+1],a=Math.abs((n.y-i.y)/(n.x-i.x)),o=6*Math.pow((t.x-s+2)/p,.38);return t.y-Math.sqrt(1+Math.pow(a,2))*o}).y1(function(t){var e=t.x,r=j(F,A.invert(e));r>=F.length-1&&(r=F.length-2),r<1&&(r=1);var i=F[r-1],n=F[r+1],a=Math.abs((n.y-i.y)/(n.x-i.x)),o=6*Math.pow((t.x-s+2)/p,.38);return t.y+Math.sqrt(1+Math.pow(a,2))*o}).curve(l.c),D=l.a().x(function(t){return t.x}).y0(function(t){var e=t.x,r=G(I,B.invert(e));r>=I.length-1&&(r=I.length-2),r<1&&(r=1);var i=I[r-1],n=I[r+1],a=Math.abs((n.y-i.y)/(n.x-i.x)),o=6*Math.pow((t.x-s+2)/y,.38);return t.y-Math.sqrt(1+Math.pow(a,2))*o}).y1(function(t){var e=t.x,r=G(I,B.invert(e));r>=I.length-1&&(r=I.length-2),r<1&&(r=1);var i=I[r-1],n=I[r+1],a=Math.abs((n.y-i.y)/(n.x-i.x)),o=6*Math.pow((t.x-s+2)/y,.38);return t.y+Math.sqrt(1+Math.pow(a,2))*o}).curve(l.c);"down"===o&&(U=l.a().y(function(t){return t.y}).x0(function(t){var e=t.y,r=j(F,A.invert(e));r>=F.length-1&&(r=F.length-2),r<1&&(r=1);var i=F[r-1],n=F[r+1],a=Math.abs((n.x-i.x)/(n.y-i.y)),o=6*Math.pow((t.y-h+2)/f,.38);return t.x-Math.sqrt(1+Math.pow(a,2))*o}).x1(function(t){var e=t.y,r=j(F,A.invert(e));r>=F.length-1&&(r=F.length-2),r<1&&(r=1);var i=F[r-1],n=F[r+1],a=Math.abs((n.x-i.x)/(n.y-i.y)),o=6*Math.pow((t.y-h+2)/f,.38);return t.x+Math.sqrt(1+Math.pow(a,2))*o}).curve(l.c),D=l.a().y(function(t){return t.y}).x0(function(t){var e=t.y,r=G(I,B.invert(e));r>=I.length-1&&(r=I.length-2),r<1&&(r=1);var i=I[r-1],n=I[r+1],a=Math.abs((n.x-i.x)/(n.y-i.y)),o=6*Math.pow((t.y-h+2)/x,.38);return t.x-Math.sqrt(1+Math.pow(a,2))*o}).x1(function(t){var e=t.y,r=G(I,B.invert(e));r>=I.length-1&&(r=I.length-2),r<1&&(r=1);var i=I[r-1],n=I[r+1],a=Math.abs((n.x-i.x)/(n.y-i.y)),o=6*Math.pow((t.y-h+2)/x,.38);return t.x+Math.sqrt(1+Math.pow(a,2))*o}).curve(l.c));N.append("path").datum(_).attr("d",U).attr("id","path1").attr("fill",a),N.append("path").datum(k).attr("d",D).attr("id","path2").attr("fill",a);l.g("#boxid"+i).selectAll("rect").each(function(i,o){var s=l.g(this);if(s.attr("id")!==t){var h=s.attr("data-body");if(void 0!==h&&null!==h&&h===n.split("-")[1]){s.attr("data-opened",!0);var d=Number(s.attr("x"))+Number(s.attr("width")),c=Number(s.attr("y"))+Number(s.attr("height"))/2,u=Number(l.g("#"+e).attr("x"))+r[0],g=Number(l.g("#"+e).attr("y"))+r[1]+Number(l.g("#"+e).attr("height"))/2;N.append("circle").attr("cx",u).attr("cy",g).attr("r",7).attr("fill",a),N.append("line").attr("x1",d).attr("y1",c).attr("x2",u).attr("y2",g).attr("stroke-width",3).attr("stroke",a).attr("stroke-dasharray","5,5").attr("marker-end","url(#arrow)").attr("class","arrowLine")}}})}function L(t,e,r,i,n,a,o,s){var h=Number(l.g("#boxid"+i).select("#"+t).attr("x"))+Number(l.g("#boxid"+i).select("#"+t).attr("width")),d=Number(l.g("#boxid"+i).select("#"+t).attr("y"))+Number(l.g("#boxid"+i).select("#"+t).attr("height"))/2,c=Number(l.g("#"+e).attr("x"))+r[0],u=Number(l.g("#"+e).attr("x"))+r[0],g=Number(l.g("#"+e).attr("y"))+r[1],p=Number(l.g("#"+e).attr("y"))+Number(l.g("#"+e).attr("height"))+r[1],f=c-h,y=g-d,x=u-h,v=p-d,m={},b={},w={},N={};m.x=h+.375*f,m.y=d+.3*y,b.x=h+.75*.8*f,b.y=d+.75*y,w.x=h+.375*x,w.y=d+.3*v,N.x=h+.75*.8*x,N.y=d+.75*v,"down"===s&&(h=Number(l.g("#boxid"+i).select("#"+t).attr("x"))+Number(l.g("#boxid"+i).select("#"+t).attr("width"))/2,d=Number(l.g("#boxid"+i).select("#"+t).attr("y"))+Number(l.g("#boxid"+i).select("#"+t).attr("height")),c=Number(l.g("#"+e).attr("x"))+r[0],u=Number(l.g("#"+e).attr("x"))+r[0]+Number(l.g("#"+e).attr("width")),g=Number(l.g("#"+e).attr("y"))+r[1],p=Number(l.g("#"+e).attr("y"))+r[1],y=g-d,x=u-h,v=p-d,b={},w={},N={},(m={}).x=h+.375*(f=c-h),m.y=d+.3*y,b.x=h+.75*.8*f,b.y=d+.75*y,w.x=h+.375*x,w.y=d+.3*v,N.x=h+.75*.8*x,N.y=d+.75*v);var _=l.g("#"+o);_.attr("sourceid",t).attr("targetid",e).attr("locationTransform",r).attr("body_num_source",i).attr("body_num_target",n).attr("color",a);var k=[{x:h,y:d},{x:m.x,y:m.y},{x:b.x,y:b.y},{x:c,y:g+17}],E=[{x:h,y:d},{x:w.x,y:w.y},{x:N.x,y:N.y},{x:u,y:p-17}];"down"===s&&(k=[{x:h,y:d},{x:m.x,y:m.y},{x:b.x,y:b.y},{x:c+17,y:g}],E=[{x:h,y:d},{x:w.x,y:w.y},{x:N.x,y:N.y},{x:u-17,y:p}]);var M=l.e().x(function(t){return t.x}).y(function(t){return t.y}).curve(l.c),S=M(k),z=document.createElementNS("http://www.w3.org/2000/svg","path");z.setAttribute("d",S);var C=M(E),L=document.createElementNS("http://www.w3.org/2000/svg","path");L.setAttribute("d",C);for(var T=z.getTotalLength(),F=L.getTotalLength(),R=[],X=0;X<500;X++){var I=z.getPointAtLength(X*T/499);R.push({x:I.x,y:I.y})}for(var O=[],P=0;P<500;P++){var A=L.getPointAtLength(P*F/499);O.push({x:A.x,y:A.y})}var j=l.f().domain(l.d(k,function(t){return t.x})).range([0,f]),B=l.b(function(t){return t.x}).left,G=l.f().domain(l.d(E,function(t){return t.x})).range([0,f]),U=l.b(function(t){return t.x}).left;"down"===s&&(j=l.f().domain(l.d(k,function(t){return t.y})).range([0,y]),B=l.b(function(t){return t.y}).left,G=l.f().domain(l.d(E,function(t){return t.y})).range([0,y]),U=l.b(function(t){return t.y}).left);var D=l.a().x(function(t){return t.x}).y0(function(t){var e=t.x,r=B(R,j.invert(e));r>=R.length-1&&(r=R.length-2),r<1&&(r=1);var i=R[r-1],n=R[r+1],a=Math.abs((n.y-i.y)/(n.x-i.x)),o=6*Math.pow((t.x-h+2)/f,.38);return t.y-Math.sqrt(1+Math.pow(a,2))*o}).y1(function(t){var e=t.x,r=B(R,j.invert(e));r>=R.length-1&&(r=R.length-2),r<1&&(r=1);var i=R[r-1],n=R[r+1],a=Math.abs((n.y-i.y)/(n.x-i.x)),o=6*Math.pow((t.x-h+2)/f,.38);return t.y+Math.sqrt(1+Math.pow(a,2))*o}).curve(l.c),q=l.a().x(function(t){return t.x}).y0(function(t){var e=t.x,r=U(O,G.invert(e));r>=O.length-1&&(r=O.length-2),r<1&&(r=1);var i=O[r-1],n=O[r+1],a=Math.abs((n.y-i.y)/(n.x-i.x)),o=6*Math.pow((t.x-h+2)/f,.38);return t.y-Math.sqrt(1+Math.pow(a,2))*o}).y1(function(t){var e=t.x,r=U(O,G.invert(e));r>=O.length-1&&(r=O.length-2),r<1&&(r=1);var i=O[r-1],n=O[r+1],a=Math.abs((n.y-i.y)/(n.x-i.x)),o=6*Math.pow((t.x-h+2)/f,.38);return t.y+Math.sqrt(1+Math.pow(a,2))*o}).curve(l.c);"down"===s&&(D=l.a().y(function(t){return t.y}).x0(function(t){var e=t.y,r=B(R,j.invert(e));r>=R.length-1&&(r=R.length-2),r<1&&(r=1);var i=R[r-1],n=R[r+1],a=Math.abs((n.x-i.x)/(n.y-i.y)),o=6*Math.pow((t.y-d+2)/y,.38);return t.x-Math.sqrt(1+Math.pow(a,2))*o}).x1(function(t){var e=t.y,r=B(R,j.invert(e));r>=R.length-1&&(r=R.length-2),r<1&&(r=1);var i=R[r-1],n=R[r+1],a=Math.abs((n.x-i.x)/(n.y-i.y)),o=6*Math.pow((t.y-d+2)/y,.38);return t.x+Math.sqrt(1+Math.pow(a,2))*o}).curve(l.c),q=l.a().y(function(t){return t.y}).x0(function(t){var e=t.y,r=U(O,G.invert(e));r>=O.length-1&&(r=O.length-2),r<1&&(r=1);var i=O[r-1],n=O[r+1],a=Math.abs((n.x-i.x)/(n.y-i.y)),o=6*Math.pow((t.y-d+2)/v,.38);return t.x-Math.sqrt(1+Math.pow(a,2))*o}).x1(function(t){var e=t.y,r=U(O,G.invert(e));r>=O.length-1&&(r=O.length-2),r<1&&(r=1);var i=O[r-1],n=O[r+1],a=Math.abs((n.x-i.x)/(n.y-i.y)),o=6*Math.pow((t.y-d+2)/v,.38);return t.x+Math.sqrt(1+Math.pow(a,2))*o}).curve(l.c));_.select("#path1").datum(k).transition().duration(720).attr("d",D).attr("fill",a),_.select("#path2").datum(E).transition().duration(720).attr("d",q).attr("fill",a);l.g("#boxid"+i).selectAll("rect").each(function(i,o){var s=l.g(this);if(s.attr("id")!==t){var h=s.attr("data-body");if(void 0!==h&&null!==h&&h===n.split("-")[1]){var d=Number(s.attr("x"))+Number(s.attr("width")),c=Number(s.attr("y"))+Number(s.attr("height"))/2,u=Number(l.g("#"+e).attr("x"))+r[0],g=Number(l.g("#"+e).attr("y"))+r[1]+Number(l.g("#"+e).attr("height"))/2;_.select("circle").transition().duration(720).attr("cx",u).attr("cy",g).attr("r",7).attr("fill",a),_.select("line").transition().duration(720).attr("x1",d).attr("y1",c).attr("x2",u).attr("y2",g).attr("stroke-width",3).attr("stroke",a).attr("stroke-dasharray","5,5").attr("marker-end","url(#arrow)").attr("class","arrowLine")}}})}function T(t,e,r,i,n,a){var o="frame"+e,s=t[r][0]-t[e][0]-Number(l.g("#"+o).attr("width")),h=t[r][1]-t[e][1],d=Number(l.g("#"+o).attr("x"))+Number(l.g("#"+o).attr("width")),c=Number(l.g("#"+o).attr("y"))+Number(l.g("#"+o).attr("height"))/2,u=d+s,g=c+h;"down"===a&&(d=Number(l.g("#"+o).attr("x"))+Number(l.g("#"+o).attr("width"))/2,c=Number(l.g("#"+o).attr("y"))+Number(l.g("#"+o).attr("height")),s=t[r][0]-t[e][0],h=t[r][1]-t[e][1]-Number(l.g("#"+o).attr("height")));var p=l.g("svg").select("#sumGroup").append("g").attr("id","line"+String(e)+"_"+String(r)).attr("line-type","dashed").attr("class","drawer");p.append("defs").append("marker").attr("id","arrow").attr("markerWidth",5).attr("markerHeight",3.5).attr("refX",5).attr("refY",1.75).attr("orient","auto").append("path").attr("d","M0,0 L5,1.75 L0,3.5 Z").style("fill","gray"),p.append("line").attr("x1",d).attr("y1",c).attr("x2",u).attr("y2",g).attr("stroke-width",5).attr("stroke",i).attr("stroke-dasharray","5,5").attr("marker-end","url(#arrow)").attr("class","arrowLine");var f=(d+u)/2-45,y=(c+g)/2-5;p.append("text").attr("x",f).attr("y",y).text(n).style("font-size","30px").style("fill","black")}function F(t,e,r,i,n,a,o){var s="frame"+e,h=t[r][0]-t[e][0]-Number(l.g("#"+s).attr("width")),d=t[r][1]-t[e][1],c=Number(l.g("#"+s).attr("x"))+Number(l.g("#"+s).attr("width")),u=Number(l.g("#"+s).attr("y"))+Number(l.g("#"+s).attr("height"))/2,g=c+h,p=u+d;"down"===o&&(c=Number(l.g("#"+s).attr("x"))+Number(l.g("#"+s).attr("width"))/2,u=Number(l.g("#"+s).attr("y"))+Number(l.g("#"+s).attr("height")),h=t[r][0]-t[e][0],d=t[r][1]-t[e][1]-Number(l.g("#"+s).attr("height")));var f=l.g("svg").select("#sumGroup").select("#"+a);f.select("line").transition().duration(720).attr("x1",c).attr("y1",u).attr("x2",g).attr("y2",p).attr("stroke-width",5).attr("stroke",i).attr("stroke-dasharray","5,5").attr("marker-end","url(#arrow)").attr("class","arrowLine");var y=(c+g)/2-45,x=(u+p)/2-5;f.select("text").transition().duration(720).attr("x",y).attr("y",x).text(n).style("font-size","30px").style("fill","black")}function R(t,e){if(t.length!==e.length)return!1;for(var r=0;r<t.length;r++)if(t[r]!==e[r])return!1;return!0}function X(t,e){console.log(e),e.forEach(function(e){var r=t,i=2;e.path.forEach(function(t){if(0!==Number(t))if(i<=e.path.length-1){var n=r.children.filter(function(e){return Number(e.name)===Number(t)})[0];i+=1,r=n}else t===e.path[e.path.length-1]&&(r.hasOwnProperty("children")?(r.children.push(e),r.children.sort(function(t,e){for(var r=t.oName.split("-").map(Number),i=e.oName.split("-").map(Number),n=0;n<r.length;n++){if(r[n]<i[n])return-1;if(r[n]>i[n])return 1}return 0})):r.children=[e])})})}function I(t){var e={},r=[];l.h(".drawer").each(function(i,n){var a=l.g(this).attr("id").replace("boxid",""),o=l.g(this).attr("direction");if(2!==a.split("_").length){var s=a.split("-"),h=s[s.length-1];if("0"===h)e.name=Number(h),e.oName=a,e.path=s,e.size=[Number(l.g(this).attr("width"))+t,Number(l.g(this).attr("height"))],e.direction=o;else{var d={};d.name=Number(h),d.size=[Number(l.g(this).attr("width"))+t,Number(l.g(this).attr("height"))],d.path=s,d.oName=a,d.direction=o,r.push(d)}}});return r.sort(function(t,e){return t.path.length-e.path.length}),X(e,r),function t(e,r){r(e),e.children&&e.children.forEach(function(e){return t(e,r)}),e._children&&e._children.forEach(function(e){return t(e,r)})}(e,function(t){Array.isArray(t.size)&&(t._size||(t._size=t.size.slice()),t.size=t._size.slice().reverse())}),e}var O=r("Zx67"),P=r.n(O),A=r("zwoO"),j=r.n(A),B=r("Pf15"),G=r.n(B),U=r("woOf"),D=r.n(U),q=r("u2KI"),V=r.n(q),W=r("0PjT"),H=V()({children:function(t){return t.children},nodeSize:function(t){return t.data.size},spacing:0});function J(t){var e=D()({},H,t);function r(t){var r=e[t];return"function"==typeof r?r:function(){return r}}function i(t){var e,i,o,l=a((e=n(),i=r("nodeSize"),o=r("spacing"),function(t){function e(t){p()(this,e);var r=j()(this,(e.__proto__||P()(e)).call(this,t));return D()(r,{x:0,y:0,relX:0,prelim:0,shift:0,change:0,lExt:r,lExtRelX:0,lThr:null,rExt:r,rExtRelX:0,rThr:null}),r}return G()(e,t),y()(e,[{key:"spacing",value:function(t){return o(this.data,t.data)}},{key:"update",value:function(){return Y(this),Z(this),this}},{key:"size",get:function(){return i(this.data)}},{key:"x",get:function(){return this.data.x},set:function(t){this.data.x=t}},{key:"y",get:function(){return this.data.y},set:function(t){this.data.y=t}}]),e}(e)),t,function(t){return t.children});return l.update(),l.data}function n(){var t=r("nodeSize"),e=r("spacing");return function(r){function i(t){return p()(this,i),j()(this,(i.__proto__||P()(i)).call(this,t))}return G()(i,r),y()(i,[{key:"copy",value:function(){var t=a(this.constructor,this,function(t){return t.children});return t.each(function(t){return t.data=t.data.data}),t}},{key:"spacing",value:function(t){return e(this,t)}},{key:"size",get:function(){return t(this)}},{key:"nodes",get:function(){return this.descendants()}},{key:"xSize",get:function(){return this.size[0]}},{key:"ySize",get:function(){return this.size[1]}},{key:"top",get:function(){return this.y}},{key:"bottom",get:function(){return this.y+this.ySize}},{key:"left",get:function(){return this.x-this.xSize/2}},{key:"right",get:function(){return this.x+this.xSize/2}},{key:"root",get:function(){var t=this.ancestors();return t[t.length-1]}},{key:"numChildren",get:function(){return this.hasChildren?this.children.length:0}},{key:"hasChildren",get:function(){return!this.noChildren}},{key:"noChildren",get:function(){return null===this.children}},{key:"firstChild",get:function(){return this.hasChildren?this.children[0]:null}},{key:"lastChild",get:function(){return this.hasChildren?this.children[this.numChildren-1]:null}},{key:"extents",get:function(){return(this.children||[]).reduce(function(t,e){return i.maxExtents(t,e.extents)},this.nodeExtents)}},{key:"nodeExtents",get:function(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}],[{key:"maxExtents",value:function(t,e){return{top:Math.min(t.top,e.top),bottom:Math.max(t.bottom,e.bottom),left:Math.min(t.left,e.left),right:Math.max(t.right,e.right)}}}]),i}(W.a.prototype.constructor)}function a(t,e,r){return function e(i,n){var a=new t(i);D()(a,{parent:n,depth:null===n?0:n.depth+1,height:0,length:1});var o=r(i)||[];return a.children=0===o.length?null:o.map(function(t){return e(t,a)}),a.children&&D()(a,a.children.reduce(function(t,e){return{height:Math.max(t.height,e.height+1),length:t.length+e.length}},a)),a}(e,null)}return D()(i,{nodeSize:function(t){return arguments.length?(e.nodeSize=t,i):e.nodeSize},spacing:function(t){return arguments.length?(e.spacing=t,i):e.spacing},children:function(t){return arguments.length?(e.children=t,i):e.children},hierarchy:function(t,r){var i=void 0===r?e.children:r;return a(n(),t,i)},dump:function(t){var e=r("nodeSize");return function t(r){return function(i){var n=r+"  ",a=r+"    ",o=i.x,l=i.y,s=e(i),h=i.children||[],d=0===h.length?" ":","+n+"children: ["+a+h.map(t(a)).join(a)+n+"],"+r;return"{ size: ["+s.join(", ")+"],"+n+"x: "+o+", y: "+l+d+"},"}}("\n")(t)}}),i}var Y=function t(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e.y=r,(e.children||[]).reduce(function(r,i){var n=N()(r,2),a=n[0],o=n[1];t(i,e.y+e.ySize);var l=(0===a?i.lExt:i.rExt).bottom;return 0!==a&&K(e,a,o),[a+1,ot(l,a,o)]},[0,null]),$(e),at(e),e},Z=function t(e,r,i){void 0===r&&(r=-e.relX-e.prelim,i=0);var n=r+e.relX;return e.relX=n+e.prelim-i,e.prelim=0,e.x=i+e.relX,(e.children||[]).forEach(function(r){return t(r,n,e.x)}),e},$=function(t){(t.children||[]).reduce(function(t,e){var r=N()(t,2),i=r[0],n=r[1],a=i+e.shift,o=n+a+e.change;return e.relX+=o,[a,o]},[0,0])},K=function(t,e,r){for(var i=t.children[e-1],n=t.children[e],a=i,o=i.relX,l=n,s=n.relX,h=!0;a&&l;){a.bottom>r.lowY&&(r=r.next);var d=o+a.prelim-(s+l.prelim)+a.xSize/2+l.xSize/2+a.spacing(l);(d>0||d<0&&h)&&(s+=d,Q(n,d),tt(t,e,r.index,d)),h=!1;var c=a.bottom,u=l.bottom;c<=u&&(a=rt(a))&&(o+=a.relX),c>=u&&(l=et(l))&&(s+=l.relX)}!a&&l?it(t,e,l,s):a&&!l&&nt(t,e,a,o)},Q=function(t,e){t.relX+=e,t.lExtRelX+=e,t.rExtRelX+=e},tt=function(t,e,r,i){var n=t.children[e],a=e-r;if(a>1){var o=i/a;t.children[r+1].shift+=o,n.shift-=o,n.change-=i-o}},et=function(t){return t.hasChildren?t.firstChild:t.lThr},rt=function(t){return t.hasChildren?t.lastChild:t.rThr},it=function(t,e,r,i){var n=t.firstChild,a=n.lExt,o=t.children[e];a.lThr=r;var l=i-r.relX-n.lExtRelX;a.relX+=l,a.prelim-=l,n.lExt=o.lExt,n.lExtRelX=o.lExtRelX},nt=function(t,e,r,i){var n=t.children[e],a=n.rExt,o=t.children[e-1];a.rThr=r;var l=i-r.relX-n.rExtRelX;a.relX+=l,a.prelim-=l,n.rExt=o.rExt,n.rExtRelX=o.rExtRelX},at=function(t){if(t.hasChildren){var e=t.firstChild,r=t.lastChild,i=(e.prelim+e.relX-e.xSize/2+r.relX+r.prelim+r.xSize/2)/2;D()(t,{prelim:i,lExt:e.lExt,lExtRelX:e.lExtRelX,rExt:r.rExt,rExtRelX:r.rExtRelX})}},ot=function(t,e,r){for(;null!==r&&t>=r.lowY;)r=r.next;return{lowY:t,index:e,next:r}},lt=r("c/Tr"),st=r.n(lt),ht=r("lHA8"),dt=r.n(ht),ct=r("Dd8w"),ut=r.n(ct);function gt(t){return function(t){var e={};do{var r=pt(t),i=[].concat(M()(r.right),M()(r.down),M()(r.mix));console.log(i,"current"),console.log(e,"currentT");var n=i.reduce(function(t,e){return ut()({},t,e)},{});if(_(e)){var a=k(e,n);console.log(a);var o=!0,l=!1,s=void 0;try{for(var h,d=u()(a);!(o=(h=d.next()).done);o=!0){var c=h.value,g=n[c],p={};for(var f in e){var y=e[f];f.startsWith(c)&&(p[f]=y)}var x=ft(p);console.log(x),console.log(g);var v=g[0]-x.x,b=g[1]-x.y;for(var w in e){var N=e[w];w.startsWith(c)&&(N[0]+=v,N[1]+=b)}}}catch(t){l=!0,s=t}finally{try{!o&&d.return&&d.return()}finally{if(l)throw s}}E(e,n)}else e=m()(n)}while("children"in t);return console.log(e,"layout"),e;function _(t){for(var e in t)return!0;return!1}function k(t,e){var r=[];for(var i in t)t.hasOwnProperty(i)&&e.hasOwnProperty(i)&&r.push(i);return r}function E(t,e){for(var r in e)e.hasOwnProperty(r)&&!t.hasOwnProperty(r)&&(t[r]=e[r])}}(m()(t))}function pt(t){var e=new dt.a,r=new dt.a;!function t(e,r){e.parent=r;e.children&&e.children.forEach(function(r){return t(r,e)})}(t,null),function t(e,r,i){var n=!0;!function t(r){r.direction!==e.direction&&(n=!1);r.children&&r.children.forEach(t)}(e);if(n)return"right"===e.direction?null!==e.parent?r.add(e.parent):r.add(e):"down"===e.direction&&(e.parent,i.add(e.parent)),!0;e.children&&e.children.forEach(function(e){return t(e,r,i)});return!1}(t,e,r);var i=new dt.a,n=!0,a=!1,o=void 0;try{for(var l,s=u()(e);!(n=(l=s.next()).done);n=!0){var h=l.value;r.has(h)&&(i.add(h),e.delete(h),r.delete(h))}}catch(t){a=!0,o=t}finally{try{!n&&s.return&&s.return()}finally{if(a)throw o}}return{right:st()(e).map(function(t){var e=m()(t);if(delete t.children,c(e),"down"===t.direction){var r=e.size[0];e.size[0]=e.size[1],e.size[1]=r}var i=J({spacing:80}),n=i(i.hierarchy(e));n.each(function(t){var e=t.x;t.x=t.y,t.y=e});var a={};n.each(function(t){a[t.data.oName]=[t.x,t.y,t.data.size[1],1*t.data.size[0]]});var o=ft(a);return t.size=[o.width,o.height],t._size=[o.height,o.width],a}),down:st()(r).map(function(t){var e=m()(t);if(delete t.children,d(e),"right"===t.direction){var r=e.size[0];e.size[0]=e.size[1],e.size[1]=r}var i=J({spacing:80}),n={};i(i.hierarchy(e)).each(function(t){n[t.data.oName]=[t.x,t.y,1*t.data.size[0],t.data.size[1]]});var a=ft(n);return t.size=[a.width,a.height],t._size=[a.height,a.width],n}),mix:st()(i).map(function(t){var e=m()(t);delete t.children;var r=m()(e);d(r),c(e);var i=J({spacing:80}),n=J({spacing:80}),a=i.hierarchy(r),o=n.hierarchy(e);if("right"===t.direction){var l=r.size[0];r.size[0]=r.size[1],r.size[1]=l}if("down"===t.direction){var s=e.size[0];e.size[0]=e.size[1],e.size[1]=s}var h=i(a),u=i(o);u.each(function(t){var e=t.x;t.x=t.y,t.y=e});var g={};h.each(function(t){g[t.data.oName]=[t.x,t.y,t.data.size[0],1*t.data.size[1]]});var p={};u.each(function(t){p[t.data.oName]=[t.x,t.y,t.data.size[1],1*t.data.size[0]]});var f=p[t.oName][0]-g[t.oName][0],y=p[t.oName][1]-g[t.oName][1];for(var x in g)g[x][0]+=f,g[x][1]+=y;var v=ut()({},p,g),b=ft(v);return t.size=[b.width,b.height],t._size=[b.height,b.width],console.log(b,"test"),v})};function d(t){t.children&&(t.children=t.children.filter(function(t){return"right"!==t.direction}),t.children.forEach(d))}function c(t){t.children&&(t.children=t.children.filter(function(t){return"down"!==t.direction}),t.children.forEach(c))}}function ft(t){var e=1/0,r=1/0,i=-1/0,n=-1/0;for(var a in t){var o=t[a],l=o[0],s=o[1],h=l,d=s,c=l+o[2],u=s+o[3];e=Math.min(e,h),r=Math.min(r,d),i=Math.max(i,c),n=Math.max(n,u)}return{x:e,y:r,width:i-e,height:n-r}}function yt(t,e,r,i,n,a,o){console.log(o,"direction");var s=l.g("#boxid"+String(r)).select("#"+String(i));if(a||"true"===s.attr("data-opened"))return l.g("#boxid"+String(r)).selectAll("[data-opened='true']").attr("data-opened","false"),void l.h(".drawer").each(function(t,i){var n=this,a=l.g(this).attr("id").replace("line","").replace("boxid",""),o=(String(r)+"-"+String(e)).split("-");if(2===a.split("_").length){var s=!1,h=a.split("_")[0],d=a.split("_")[1],c=h.split("-"),u=d.split("-");if(R(c,o))l.g(this).transition().duration(200).style("opacity",0).end().then(function(){l.g(n).remove()}),s=!0;else if(c.length>o.length){var g=c.slice(0,o.length);z()(g)===z()(o)&&(l.g(this).transition().duration(200).style("opacity",0).end().then(function(){l.g(n).remove()}),s=!0)}if(!s)if(R(u,o))l.g(this).transition().duration(200).style("opacity",0).end().then(function(){l.g(n).remove()});else if(u.length>o.length){var p=u.slice(0,o.length);z()(p)===z()(o)&&l.g(this).transition().duration(200).style("opacity",0).end().then(function(){l.g(n).remove()})}}else{var f=a.split("-");if(R(f,o))l.g(this).transition().duration(200).style("opacity",0).end().then(function(){l.g(n).remove()});else if(f.length>o.length){var y=f.slice(0,o.length);z()(y)===z()(o)&&l.g(this).transition().duration(200).style("opacity",0).end().then(function(){l.g(n).remove()})}}});r=String(r);var h=b(t[e-1]),c=String(r)+"-"+String(e);mt(h,t,c,o);var u,g=I(100);u=gt(g);d()(u);console.log(u);var p=u[c][0]-u[r][0],f=u[c][1]-u[c][3]/2-(u[r][1]-u[r][3]/2);C(i,"frame"+c,[p,f],r,c,n,o),l.h(".drawer").each(function(t,e){var r=l.g(this).attr("id").replace("boxid","");2!==r.split("_").length&&(r===c?(l.g(this).attr("transform","translate("+(u[r][0]+90)+","+(u[r][1]+675-u[r][3]/2)+")").attr("opacity",0),l.g(this).transition().duration(920).style("opacity",1)):l.g(this).transition().duration(720).attr("transform","translate("+(u[r][0]+90)+","+(u[r][1]+675-u[r][3]/2)+")"))}),l.h(".drawer").each(function(t,e){var r=l.g(this).attr("id").replace("boxid","");if(2===r.split("_").length)if("dashed"!==l.g(this).attr("line-type")){var i=r,n=r.replace("line","").split("_")[0],a=r.replace("line","").split("_")[1],o=l.g("#boxid"+n).attr("transform"),s=l.g("#boxid"+a).attr("transform");if(null!==o&&n!=c){var h,d=o.slice(10,-1).split(",").map(Number);h=[u[n][0]+90,u[n][1]+675-u[n][3]/2];var g=[u[a][0]-u[n][0],u[a][1]-u[a][3]/2-(u[n][1]-u[n][3]/2)];if(d[1]!==h[1]||d[0]!==h[0]){var p=l.g(this).attr("sourceid"),f=l.g(this).attr("targetid"),y=l.g(this).attr("body_num_source"),x=l.g(this).attr("body_num_target");L(p,f,g,y,x,l.g(this).attr("color"),i,l.g("#boxid"+x).attr("direction"))}}if(null!==s&&a!=c){var v,m=s.slice(10,-1).split(",").map(Number),b=[u[a][0]-u[n][0],u[a][1]-u[a][3]/2-(u[n][1]-u[n][3]/2)];if(v=[u[a][0]+90,u[a][1]+675-u[a][3]/2],m[1]!==v[1]||m[0]!==v[0]){var w=l.g(this).attr("sourceid"),N=l.g(this).attr("targetid"),_=l.g(this).attr("body_num_source"),k=l.g(this).attr("body_num_target");L(w,N,b,_,k,l.g(this).attr("color"),i,l.g("#boxid"+k).attr("direction"))}}r=(r=r.replace("line","")).split("_")[0],l.g(this).attr("transform","translate("+(u[r][0]+90)+","+(u[r][1]+675-u[r][3]/2)+")").style("opacity",.38)}else{var E=r,M=r.replace("line","").split("_")[0],S=r.replace("line","").split("_")[1],z=l.g("#boxid"+M).attr("transform"),C=l.g("#boxid"+S).attr("transform");if(null!==z&&M!=c){var T,R=z.slice(10,-1).split(",").map(Number);if(T=[u[M][0]+90,u[M][1]+675-u[M][3]/2],R[1]!==T[1]||R[0]!==T[0]){var X=l.g(this).select("text").text();F(u,M,S,"black",X,E)}}if(null!==C&&S!=c){var I,O=C.slice(10,-1).split(",").map(Number);if(I=[u[S][0]+90,u[S][1]+675-u[S][3]/2],O[1]!==I[1]||O[0]!==I[0]){var P=l.g(this).select("text").text();F(u,M,S,"black",P,E)}}r=(r=r.replace("line","")).split("_")[0],l.g(this).transition().duration(720).attr("transform","translate("+(u[r][0]+90)+","+(u[r][1]+675-u[r][3]/2)+")")}})}r("izJC");function xt(t,e,r,i,n,a,o,s,h){var c=l.g("#boxid"+String(n)).select("#"+String(a));if(s||"true"===c.attr("data-opened"))return l.g("#boxid"+String(n)).selectAll("[data-opened='true']").attr("data-opened","false"),void l.h(".drawer").each(function(t,r){var i=this,a=l.g(this).attr("id").replace("line","").replace("boxid",""),o=(String(n)+"-"+String(e)).split("-");if(2===a.split("_").length){var s=!1,h=a.split("_")[0],d=a.split("_")[1],c=h.split("-"),u=d.split("-");if(R(c,o))l.g(this).transition().duration(200).style("opacity",0).end().then(function(){l.g(i).remove()}),s=!0;else if(c.length>o.length){var g=c.slice(0,o.length);z()(g)===z()(o)&&(l.g(this).transition().duration(200).style("opacity",0).end().then(function(){l.g(i).remove()}),s=!0)}if(!s)if(R(u,o))l.g(this).transition().duration(200).style("opacity",0).end().then(function(){l.g(i).remove()});else if(u.length>o.length){var p=u.slice(0,o.length);z()(p)===z()(o)&&l.g(this).transition().duration(200).style("opacity",0).end().then(function(){l.g(i).remove()})}}else{var f=a.split("-");if(R(f,o))l.g(this).transition().duration(200).style("opacity",0).end().then(function(){l.g(i).remove()});else if(f.length>o.length){var y=f.slice(0,o.length);z()(y)===z()(o)&&l.g(this).transition().duration(200).style("opacity",0).end().then(function(){l.g(i).remove()})}}});n=String(n);var u=void 0,g=b(t[e-1]),p=b(t[r-1]);void 0!==i&&(u=b(t[i-1]));var f=String(n)+"-"+String(e),y=String(f)+"-"+String(r),x=String(f)+"-"+String(i);mt(g,t,f,h),mt(p,t,y,h),void 0!==i&&mt(u,t,x,h);var v,m=I(100);v=gt(m);d()(v);console.log(v),console.log();var w=v[f][0]-v[n][0],N=v[f][1]-v[f][3]/2-(v[n][1]-v[n][3]/2);C(a,"frame"+f,[w,N],n,f,o,h),T(v,f,y,"black","TRUE",h),void 0!==u&&T(v,f,x,"black","FALSE",h),l.h(".drawer").each(function(t,e){var r=l.g(this).attr("id").replace("boxid","");if(2===r.split("_").length)if("dashed"!==l.g(this).attr("line-type")){var i=r,n=r.replace("line","").split("_")[0],a=r.replace("line","").split("_")[1],o=l.g("#boxid"+n).attr("transform"),s=l.g("#boxid"+a).attr("transform");if(null!==o&&n!=f){var h,d=o.slice(10,-1).split(",").map(Number);h=[v[n][0]+90,v[n][1]+675-v[n][3]/2];var c=[v[a][0]-v[n][0],v[a][1]-v[a][3]/2-(v[n][1]-v[n][3]/2)];if(d[1]!==h[1]||d[0]!==h[0]){var u=l.g(this).attr("sourceid"),g=l.g(this).attr("targetid"),p=(l.g(this).attr("locationTransform").split(","),l.g(this).attr("body_num_source")),m=l.g(this).attr("body_num_target");L(u,g,c,p,m,l.g(this).attr("color"),i,l.g("#boxid"+m).attr("direction"))}}if(null!==s&&a!=f){var b,w=s.slice(10,-1).split(",").map(Number);b=[v[a][0]+90,v[a][1]+675-v[a][3]/2];var N=[v[a][0]-v[n][0],v[a][1]-v[a][3]/2-(v[n][1]-v[n][3]/2)];if(w[1]!==b[1]||w[0]!==b[0]){var _=l.g(this).attr("sourceid"),k=l.g(this).attr("targetid"),E=(l.g(this).attr("locationTransform").split(","),l.g(this).attr("body_num_source")),M=l.g(this).attr("body_num_target");L(_,k,N,E,M,l.g(this).attr("color"),i,l.g("#boxid"+M).attr("direction"))}}r=(r=r.replace("line","")).split("_")[0],l.g(this).attr("transform","translate("+(v[r][0]+90)+","+(v[r][1]+675-v[r][3]/2)+")").style("opacity",.38)}else{var S=r,z=r.replace("line","").split("_")[0],C=r.replace("line","").split("_")[1],T=l.g("#boxid"+z).attr("transform"),R=l.g("#boxid"+C).attr("transform");if(null!==T&&z!=f){var X,I=T.slice(10,-1).split(",").map(Number);if(X=[v[z][0]+90,v[z][1]+675-v[z][3]/2],I[1]!==X[1]||I[0]!==X[0]){var O=l.g(this).select("text").text(),P=l.g("#boxid"+C).attr("direction");F(v,z,C,"black",O,S,P)}}if(null!==R&&C!=f){var A,j=R.slice(10,-1).split(",").map(Number);if(A=[v[C][0]+90,v[C][1]+675-v[C][3]/2],j[1]!==A[1]||j[0]!==A[0]){var B=l.g(this).select("text").text(),G=l.g("#boxid"+C).attr("direction");F(v,z,C,"black",B,S,G)}}r=(r=r.replace("line","")).split("_")[0],l.g(this).attr("transform","translate("+(v[r][0]+90)+","+(v[r][1]+675-v[r][3]/2)+")")}else r===f||r===x||r===y?(l.g(this).attr("transform","translate("+(v[r][0]+90)+","+(v[r][1]+675-v[r][3]/2)+")").attr("opacity",0),l.g(this).transition().duration(920).style("opacity",1)):l.g(this).transition().duration(720).attr("transform","translate("+(v[r][0]+90)+","+(v[r][1]+675-v[r][3]/2)+")")})}function vt(t,e,r,i,n,a,o,s,h,c){var u=l.g("#boxid"+String(a)).select("#"+String(o));if(h||"true"===u.attr("data-opened"))return l.g("#boxid"+String(a)).selectAll("[data-opened='true']").attr("data-opened","false"),void l.h(".drawer").each(function(t,r){var i=this,n=l.g(this).attr("id").replace("line","").replace("boxid",""),o=(String(a)+"-"+String(e)).split("-");if(2===n.split("_").length){var s=!1,h=n.split("_")[0],d=n.split("_")[1],c=h.split("-"),u=d.split("-");if(R(c,o))l.g(this).transition().duration(200).style("opacity",0).end().then(function(){l.g(i).remove()}),s=!0;else if(c.length>o.length){var g=c.slice(0,o.length);z()(g)===z()(o)&&(l.g(this).transition().duration(200).style("opacity",0).end().then(function(){l.g(i).remove()}),s=!0)}if(!s)if(R(u,o))l.g(this).transition().duration(200).style("opacity",0).end().then(function(){l.g(i).remove()});else if(u.length>o.length){var p=u.slice(0,o.length);z()(p)===z()(o)&&l.g(this).transition().duration(200).style("opacity",0).end().then(function(){l.g(i).remove()})}}else{var f=n.split("-");if(R(f,o))l.g(this).transition().duration(200).style("opacity",0).end().then(function(){l.g(i).remove()});else if(f.length>o.length){var y=f.slice(0,o.length);z()(y)===z()(o)&&l.g(this).transition().duration(200).style("opacity",0).end().then(function(){l.g(i).remove()})}}});a=String(a);var g=String(a)+"-"+String(e),p=String(g)+"-"+String(r),f=String(g)+"-"+String(i),y=String(g)+"-"+String(n);void 0!==e&&mt(b(t[e-1]),t,g,c),void 0!==r&&mt(b(t[r-1]),t,p,c),void 0!==i&&mt(b(t[i-1]),t,f,c),void 0!==n&&mt(b(t[n-1]),t,y,c);var x,v=I(100);x=gt(v);d()(x);console.log(x),console.log();var m=x[g][0]-x[a][0],w=x[g][1]-x[g][3]/2-(x[a][1]-x[a][3]/2);C(o,"frame"+g,[m,w],a,g,s,c),void 0!==r&&T(x,g,p,"black","PRE",c),void 0!==i&&T(x,g,f,"black","WHILE TRUE",c),void 0!==n&&T(x,g,y,"black","POST",c),l.h(".drawer").each(function(t,e){var r=l.g(this).attr("id").replace("boxid","");if(2===r.split("_").length)if("dashed"!==l.g(this).attr("line-type")){var i=r,n=r.replace("line","").split("_")[0],a=r.replace("line","").split("_")[1],o=l.g("#boxid"+n).attr("transform"),s=l.g("#boxid"+a).attr("transform");if(null!==o&&n!=g){var h,d=o.slice(10,-1).split(",").map(Number);h=[x[n][0]+90,x[n][1]+675-x[n][3]/2];var c=[x[a][0]-x[n][0],x[a][1]-x[a][3]/2-(x[n][1]-x[n][3]/2)];if(d[1]!==h[1]||d[0]!==h[0]){var u=l.g(this).attr("sourceid"),v=l.g(this).attr("targetid"),m=(l.g(this).attr("locationTransform").split(","),l.g(this).attr("body_num_source")),b=l.g(this).attr("body_num_target");L(u,v,c,m,b,l.g(this).attr("color"),i,l.g("#boxid"+b).attr("direction"))}}if(null!==s&&a!=g){var w,N=s.slice(10,-1).split(",").map(Number);w=[x[a][0]+90,x[a][1]+675-x[a][3]/2];var _=[x[a][0]-x[n][0],x[a][1]-x[a][3]/2-(x[n][1]-x[n][3]/2)];if(N[1]!==w[1]||N[0]!==w[0]){var k=l.g(this).attr("sourceid"),E=l.g(this).attr("targetid"),M=(l.g(this).attr("locationTransform").split(","),l.g(this).attr("body_num_source")),S=l.g(this).attr("body_num_target");L(k,E,_,M,S,l.g(this).attr("color"),i,l.g("#boxid"+S).attr("direction"))}}r=(r=r.replace("line","")).split("_")[0],l.g(this).attr("transform","translate("+(x[r][0]+90)+","+(x[r][1]+675-x[r][3]/2)+")").style("opacity",.38)}else{var z=r,C=r.replace("line","").split("_")[0],T=r.replace("line","").split("_")[1],R=l.g("#boxid"+C).attr("transform"),X=l.g("#boxid"+T).attr("transform");if(null!==R&&C!=g){var I,O=R.slice(10,-1).split(",").map(Number);if(I=[x[C][0]+90,x[C][1]+675-x[C][3]/2],O[1]!==I[1]||O[0]!==I[0]){var P=l.g(this).select("text").text(),A=l.g("#boxid"+T).attr("direction");F(x,C,T,"black",P,z,A)}}if(null!==X&&T!=g){var j,B=X.slice(10,-1).split(",").map(Number);if(j=[x[T][0]+90,x[T][1]+675-x[T][3]/2],B[1]!==j[1]||B[0]!==j[0]){var G=l.g(this).select("text").text(),U=l.g("#boxid"+T).attr("direction");F(x,C,T,"black",G,z,U)}}r=(r=r.replace("line","")).split("_")[0],l.g(this).attr("transform","translate("+(x[r][0]+90)+","+(x[r][1]+675-x[r][3]/2)+")")}else r===g||r===p||r===f||r===y?(l.g(this).attr("transform","translate("+(x[r][0]+90)+","+(x[r][1]+675-x[r][3]/2)+")").attr("opacity",0),l.g(this).transition().duration(920).style("opacity",1)):l.g(this).transition().duration(720).attr("transform","translate("+(x[r][0]+90)+","+(x[r][1]+675-x[r][3]/2)+")")})}function mt(t,e,r){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"right",n=l.g("#mainsvg").select("#sumGroup").append("g").attr("id","boxid"+String(r)).attr("class","drawer").attr("direction",i),a=t.nodes,o=!1,s=!1,h=Math.min.apply(Math,M()(k()(t.nodes).map(function(t){return t.y}))),d=Math.max.apply(Math,M()(k()(t.nodes).map(function(t){return t.y})));for(var c in a){var u=a[c],g=c.split("-"),p=N()(g,2),f=p[0],y=(p[1],"opo"===f);"opi"===f&&u.y===h&&(s=!0),y&&u.y===d&&(o=!0)}for(var x in console.log(a),a){var v=x.split("-"),m=N()(v,2),b=m[0],w=(m[1],"opo"===b);"opi"===b&&(a[x].y=s?h:h-50-37),w&&(a[x].y=o?d:d+50+37)}var _=1/0,E=1/0;for(var S in a){var z=S.split("-"),C=N()(z,2);C[0],C[1];a[S].x<_&&(_=a[S].x),a[S].y<E&&(E=a[S].y)}for(var L in a)a[L].x=a[L].x-_,a[L].y-=E;var T=function(t){var e=1/0,r=1/0,i=-1/0,n=-1/0;for(var a in t){var o=t[a],l=a.split("-"),s=N()(l,2),h=s[0],d=(s[1],"pof"===h),c="pif"===h,u="opo"===h,g="opi"===h,p="poc"===h,f="pic"===h,y="pol"===h,x="pil"===h;if("bf"===h||"bc"===h||"bl"===h){if(void 0===o.width||void 0===o.height)continue;"LITERAL"==o.type?o.fullBox?(e=Math.min(e,o.x-o.width/2),r=Math.min(r,o.y-o.height/2+37),i=Math.max(i,o.x+o.width/2),n=Math.max(n,o.y+o.height/2-37)):(e=Math.min(e,o.x-o.width/2+18.5),r=Math.min(r,o.y-o.height/2-37),i=Math.max(i,o.x+o.width/2-18.5),n=Math.max(n,o.y+o.height/2-37)):o.fullBox?(e=Math.min(e,o.x-o.width/2),r=Math.min(r,o.y-o.height/2+37),i=Math.max(i,o.x+o.width/2),n=Math.max(n,o.y+o.height/2-37)):(e=Math.min(e,o.x-o.width/2),r=Math.min(r,o.y-o.height/2-37),i=Math.max(i,o.x+o.width/2),n=Math.max(n,o.y+o.height/2-37))}else(d||c||g||u||f||p||x||y)&&(e=Math.min(e,o.x-o.width/2),r=Math.min(r,o.y-o.height/2),i=Math.max(i,o.x+o.width/2),n=Math.max(n,o.y+o.height/2))}return{x:e,y:r,width:i-e,height:n-r}}(a),F=function(t,e,r,i){var n=void 0,a=void 0,o=void 0,l=void 0;return"opo-0"in i&&"opi-0"in i?(n=t.x-e,a=t.y-e+r,o=t.width+2*e,l=t.height+2*e-2*r):"opo-0"in i&&!("opi-0"in i)?(n=t.x-e,a=t.y-e-r/10,o=t.width+2*e,l=t.height+2*e-r):!("opo-0"in i)&&"opi-0"in i?(n=t.x-e,a=t.y-e+2*r,o=t.width+2*e,l=t.height+2*e-r):(n=t.x-e,a=t.y-e,o=t.width+2*e,l=t.height+2*e),{x:n,y:a,width:o,height:l}}(T,22.5,37,a);for(var R in console.log(T,"bbox"),a){var X=a[R],I=R.split("-"),O=N()(I,2),P=O[0],A=(O[1],"pof"===P),j="pif"===P,B="opo"===P,G="opi"===P,U="bc"===P,D="poc"===P,q="pic"===P,V="bl"===P,W="pol"===P,H="pil"===P;if(!("aux"===P)){"bf"===P?X.fullBox?"FUNCTION"==X.type?bt(X,R,n,"green",37,e,r,F):"EXPRESSION"==X.type?bt(X,R,n,"purple",37,e,r,F):"LITERAL"==X.type?Mt(X,R,n,"red",37):"LANGUAGE_PRIMITIVE"==X.type&&St(X,R,n,"red",37):"FUNCTION"==X.type?wt(X,R,n,"green",37,e,r,F):"EXPRESSION"==X.type?wt(X,R,n,"purple",37,e,r,F):"LITERAL"==X.type?Ct(X,R,n,"red",37):"LANGUAGE_PRIMITIVE"==X.type&&zt(X,R,n,"red",37):U?X.fullBox?Nt(X,R,n,"orange",37,e,r,F):_t(X,R,n,"orange",37,e,r,F):V?X.fullBox?kt(X,R,n,"blue",37,e,r,F):Et(X,R,n,"blue",37,e,r,F):(A||j||G||B||q||D||H||W)&&Lt(X,R,n,"black")}}n.append("defs").append("marker").attr("id","arrowhead").attr("markerWidth",10).attr("markerHeight",7).attr("refX",10).attr("refY",3.5).attr("orient","auto").append("path").attr("d","M0,0 L10,3.5 L0,7 Z").style("fill","gray"),t.edges.forEach(function(t){var e=a[t.source],r=a[t.target],i=t.source.split("-")[0],o=t.target.split("-")[0];"aux"===i||"aux"===o||n.append("line").attr("x1",e.x).attr("y1",e.y-e.height/2).attr("x2",r.x).attr("y2",r.y+r.height/2).style("stroke","gray").style("stroke-width",2.2).attr("marker-end","url(#arrowhead)")});var J=T.width+90,Y=T.height+90;"opo-0"in a&&"opi-0"in a?"MODULE"===t.meta.type?Tt(n,T,J,Y,22.5,37,"gray",r):"EXPRESSION"===t.meta.type?Tt(n,T,J,Y,22.5,37,"purple",r):"FUNCTION"===t.meta.type?Tt(n,T,J,Y,22.5,37,"green",r):"PREDICATE"===t.meta.type&&Tt(n,T,J,Y,22.5,37,"Magenta",r):"opo-0"in a&&!("opi-0"in a)?"MODULE"===t.meta.type?Ft(n,T,J,Y,22.5,37,"gray",r):"EXPRESSION"===t.meta.type?Ft(n,T,J,Y,22.5,37,"purple",r):"FUNCTION"===t.meta.type?Ft(n,T,J,Y,22.5,37,"green",r):"PREDICATE"===t.meta.type&&Ft(n,T,J,Y,22.5,37,"Magenta",r):!("opo-0"in a)&&"opi-0"in a?"MODULE"===t.meta.type?Rt(n,T,J,Y,22.5,37,"gray",r):"EXPRESSION"===t.meta.type?Rt(n,T,J,Y,22.5,37,"purple",r):"FUNCTION"===t.meta.type?Rt(n,T,J,Y,22.5,37,"green",r):"PREDICATE"===t.meta.type&&Rt(n,T,J,Y,22.5,37,"Magenta",r):"MODULE"===t.meta.type?Xt(n,T,J,Y,22.5,37,"gray",r):"EXPRESSION"===t.meta.type?Xt(n,T,J,Y,22.5,37,"purple",r):"FUNCTION"===t.meta.type?Xt(n,T,J,Y,22.5,37,"green",r):"PREDICATE"===t.meta.type&&Xt(n,T,J,Y,22.5,37,"Magenta",r),n.attr("width",n.node().getBBox().width).attr("height",n.node().getBBox().height),0===r&&n.attr("transform","translate(90,"+(675-n.node().getBBox().height/2*1)+")")}function bt(t,e,r,i,n,a,o,l){var s=!1,h=null;void 0!==t.body&&(h=t.body);var d=l.x+l.width,c=l.y+l.height,u=t.x+t.width/2,g=t.y+t.height/2-n;console.log(d,"outerRight"),console.log(c,"outerBottom"),console.log(g,"innerBottom"),console.log(u,"innerRight");var p="right";d-u>c-g+120&&(p="down");var f=r.append("rect").attr("id",e).attr("x",t.x-t.width/2).attr("y",t.y-t.height/2+n).attr("width",t.width).attr("height",t.height-2*n).attr("rx",15).attr("ry",15).attr("data-body",h).attr("data-opened","neo").style("fill","rgba(0, 0, 255, 0)").style("stroke",i).style("cursor","pointer").style("stroke-width",5);void 0!==t.label&&r.append("text").attr("x",t.x).attr("y",t.y).attr("text-anchor","middle").attr("dominant-baseline","middle").style("font-size","12px").text(t.label),void 0!==t.body&&f.on("click",function(){yt(a,t.body,o,e,i,s,p),s=!s})}function wt(t,e,r,i,n,a,o){var l=arguments.length>7&&void 0!==arguments[7]?arguments[7]:"right",s=null;void 0!==t.body&&(s=t.body);var h=!1,d=l.x+l.width,c=l.y+l.height,u="right";d-(t.x+t.width/2)>c-(t.y+t.height/2-n)+120&&(u="down");var g=r.append("rect").attr("id",e).attr("x",t.x-t.width/2).attr("y",t.y-t.height/2-n).attr("width",t.width).attr("height",t.height).attr("rx",15).attr("ry",15).attr("data-body",s).attr("data-opened","neo").style("fill","rgba(0, 0, 255, 0)").style("cursor","pointer").style("stroke",i).style("stroke-width",5);void 0!==t.label&&r.append("text").attr("x",t.x).attr("y",t.y-t.height/4-n/2).attr("text-anchor","middle").attr("dominant-baseline","middle").style("font-size","12px").text(t.label),void 0!==t.body&&g.on("click",function(){yt(a,t.body,o,e,i,h,u),h=!h})}function Nt(t,e,r,i,n,a,o,l){var s=!1,h=null;void 0!==t.condition&&(h=t.condition);var d=l.x+l.width,c=l.y+l.height,u="right";d-(t.x+t.width/2)>c-(t.y+t.height/2-n)+120&&(u="down");var g=r.append("rect").attr("id",e).attr("x",t.x-t.width/2).attr("y",t.y-t.height/2+n).attr("width",t.width).attr("height",t.height-2*n).attr("rx",15).attr("ry",15).attr("data-body",h).style("fill","rgba(0, 0, 255, 0)").style("stroke",i).style("cursor","pointer").style("stroke-width",5);void 0!==t.label&&r.append("text").attr("x",t.x).attr("y",t.y).attr("text-anchor","middle").attr("dominant-baseline","middle").style("font-size","12px").text(t.label),void 0!==t.condition&&g.on("click",function(){xt(a,t.condition,t.body_if,t.body_else,o,e,i,s,u),s=!s})}function _t(t,e,r,i,n,a,o,l){var s=null;void 0!==t.body&&(s=t.body);var h=!1,d=l.x+l.width,c=l.y+l.height,u="right";d-(t.x+t.width/2)>c-(t.y+t.height/2-n)+120&&(u="down");var g=r.append("rect").attr("id",e).attr("x",t.x-t.width/2).attr("y",t.y-t.height/2-n).attr("width",t.width).attr("height",t.height).attr("rx",15).attr("ry",15).attr("data-body",s).style("fill","rgba(0, 0, 255, 0)").style("cursor","pointer").style("stroke",i).style("stroke-width",5);void 0!==t.label&&r.append("text").attr("x",t.x).attr("y",t.y-t.height/4-n/2).attr("text-anchor","middle").attr("dominant-baseline","middle").style("font-size","12px").text(t.label),void 0!==t.body&&g.on("click",function(){xt(a,t.condition,t.body_if,t.body_else,o,e,i,h,u),h=!h})}function kt(t,e,r,i,n,a,o,l){var s=!1,h=null;void 0!==t.condition&&(h=t.condition);var d=l.x+l.width,c=l.y+l.height,u="right";d-(t.x+t.width/2)>c-(t.y+t.height/2-n)+120&&(u="down");var g=r.append("rect").attr("id",e).attr("x",t.x-t.width/2).attr("y",t.y-t.height/2+n).attr("width",t.width).attr("height",t.height-2*n).attr("rx",15).attr("ry",15).attr("data-body",h).style("fill","rgba(0, 0, 255, 0)").style("stroke",i).style("cursor","pointer").style("stroke-width",5);void 0!==t.label&&r.append("text").attr("x",t.x).attr("y",t.y).attr("text-anchor","middle").attr("dominant-baseline","middle").style("font-size","12px").text(t.label),void 0!==t.condition&&g.on("click",function(){vt(a,t.condition,t.pre,t.body,t.post,o,e,i,s,u),s=!s})}function Et(t,e,r,i,n,a,o,l){var s=null;void 0!==t.body&&(s=t.body);var h=!1,d=l.x+l.width,c=l.y+l.height,u="right";d-(t.x+t.width/2)>c-(t.y+t.height/2-n)+120&&(u="down");var g=r.append("rect").attr("id",e).attr("x",t.x-t.width/2).attr("y",t.y-t.height/2-n).attr("width",t.width).attr("height",t.height).attr("rx",15).attr("ry",15).attr("data-body",s).style("fill","rgba(0, 0, 255, 0)").style("cursor","pointer").style("stroke",i).style("stroke-width",5);void 0!==t.label&&r.append("text").attr("x",t.x).attr("y",t.y-t.height/4-n/2).attr("text-anchor","middle").attr("dominant-baseline","middle").style("font-size","12px").text(t.label),void 0!==t.body&&g.on("click",function(){vt(a,t.body,o,e,i,h,u),h=!h})}function Mt(t,e,r,i,n){r.append("rect").attr("id",e).attr("x",t.x-t.width/2).attr("y",t.y-t.height/2+n).attr("width",t.width).attr("height",t.height-2*n).style("fill","none").style("stroke",i).style("stroke-width",2),void 0!==t.label&&r.append("text").attr("x",t.x).attr("y",t.y).attr("text-anchor","middle").attr("dominant-baseline","middle").style("font-size","12px").text(t.label),void 0!==t.value&&r.append("text").attr("x",t.x).attr("y",t.y).attr("text-anchor","middle").attr("dominant-baseline","middle").style("font-size","30px").text(t.value.value)}function St(t,e,r,i,n){r.append("rect").attr("id",e).attr("x",t.x-t.width/2).attr("y",t.y-t.height/2+n).attr("width",t.width).attr("height",t.height-2*n).style("fill","none").style("stroke",i).style("stroke-width",5),void 0!==t.label&&r.append("text").attr("x",t.x).attr("y",t.y).attr("text-anchor","middle").attr("dominant-baseline","middle").style("font-size","20px").text(t.label),void 0!==t.value&&r.append("text").attr("x",t.x).attr("y",t.y).attr("text-anchor","middle").attr("dominant-baseline","middle").style("font-size","30px").text(t.value.value)}function zt(t,e,r,i,n){r.append("rect").attr("id",e).attr("x",t.x-t.width/2).attr("y",t.y-t.height/2-n).attr("width",t.width).attr("height",t.height).style("fill","none").style("stroke",i).style("stroke-width",5),void 0!==t.label&&r.append("text").attr("x",t.x).attr("y",t.y).attr("text-anchor","middle").attr("dominant-baseline","middle").style("font-size","12px").text(t.label),void 0!==t.value&&r.append("text").attr("x",t.x).attr("y",t.y).attr("text-anchor","middle").attr("dominant-baseline","middle").style("font-size","30px").text(t.value.value)}function Ct(t,e,r,i,n){r.append("rect").attr("id",e).attr("x",t.x-t.width/2+n/2).attr("y",t.y-t.height/2-n).attr("width",t.width-n).attr("height",t.height).style("fill","none").style("stroke",i).style("stroke-width",2),void 0!==t.label&&r.append("text").attr("x",t.x).attr("y",t.y).attr("text-anchor","middle").attr("dominant-baseline","middle").style("font-size","12px").text(t.label),void 0!==t.value&&r.append("text").attr("x",t.x).attr("y",t.y-1.2*n).attr("text-anchor","middle").attr("dominant-baseline","middle").style("font-size","30px").text(t.value.value)}function Lt(t,e,r,i){r.append("rect").attr("id",e).attr("x",t.x-t.width/2).attr("y",t.y-t.height/2).attr("width",t.width).attr("height",t.height).style("fill","white").style("stroke",i).style("stroke-width",2),void 0!==t.label&&r.append("text").attr("x",t.x).attr("y",t.y).attr("text-anchor","middle").attr("dominant-baseline","middle").style("font-size","27px").text(t.label)}function Tt(t,e,r,i,n,a,o,l){t.append("rect",":first-child").attr("id","frame"+l).attr("x",e.x-n).attr("y",e.y-n+a).attr("rx",15).attr("ry",15).attr("width",r-2*n).attr("height",i-2*n-2*a).style("fill","none").style("stroke",o).style("stroke-width",5).lower()}function Ft(t,e,r,i,n,a,o,l){t.append("rect",":first-child").attr("id","frame"+l).attr("x",e.x-n).attr("y",e.y-n-a/10).attr("rx",15).attr("ry",15).attr("width",r-2*n).attr("height",i-2*n-a).style("fill","none").style("stroke",o).style("stroke-width",5).lower()}function Rt(t,e,r,i,n,a,o,l){t.append("rect",":first-child").attr("id","frame"+l).attr("x",e.x-n).attr("y",e.y-n+2*a).attr("rx",15).attr("ry",15).attr("width",r-2*n).attr("height",i-2*n-a).style("fill","none").style("stroke",o).style("stroke-width",5).lower()}function Xt(t,e,r,i,n,a,o,l){t.append("rect",":first-child").attr("id","frame"+l).attr("x",e.x-n).attr("y",e.y-n).attr("rx",15).attr("ry",15).attr("width",r-2*n).attr("height",i-2*n).style("fill","none").style("stroke",o).style("stroke-width",5).lower()}var It={data:function(){return{skemaVersion:"",url:"",blockStyle:{backgroundColor:"rgba(255, 255, 120, 0)",height:"90vh",width:"100%"},selectedFile:null,selectedOption:null,options:[{text:"Clay1",value:"https://raw.githubusercontent.com/hconhisway/webcrawler/master/get_beta--Gromet-FN-auto2.json"},{text:"core_dynamics",value:"https://raw.githubusercontent.com/hconhisway/webcrawler/master/core_dynamics_pack2.json"},{text:"while1",value:"https://raw.githubusercontent.com/ml4ai/skema/main/data/gromet/python/while1/FN_0.1.6/while1--Gromet-FN-auto.json"},{text:"cond1",value:"https://raw.githubusercontent.com/hconhisway/webcrawler/master/cond1--Gromet-FN-auto.json"},{text:"fun1",value:"https://raw.githubusercontent.com/ml4ai/skema/main/data/gromet/python/fun1/FN_0.1.6/fun1--Gromet-FN-auto.json"},{text:"fun4",value:"https://raw.githubusercontent.com/ml4ai/skema/main/data/gromet/python/fun4/FN_0.1.6/fun4--Gromet-FN-auto.json"},{text:"exp1",value:"https://raw.githubusercontent.com/ml4ai/skema/main/data/gromet/python/exp1/FN_0.1.6/exp1--Gromet-FN-auto.json"},{text:"exp2",value:"https://gist.githubusercontent.com/jastier/76f7566ac44265707d892a252d8f85ab/raw/2be498c5fb369635725e9e6b493732a5c181ac65/first_matlab.json"},{text:"exp3",value:"https://raw.githubusercontent.com/ml4ai/skema/main/data/gromet/python/exp3/FN_0.1.6/exp3--Gromet-FN-auto.json"},{text:"fun_default1",value:"https://raw.githubusercontent.com/ml4ai/skema/main/data/gromet/python/fun_default1/FN_0.1.6/fun_default1--Gromet-FN-auto.json"},{text:"assign_operator1",value:"https://raw.githubusercontent.com/ml4ai/skema/main/data/gromet/python/assign_operator1/FN_0.1.6/assign_operator1--Gromet-FN-auto.json"}]}},methods:{fetchData:function(){var t=this;l.h("g").remove(),s.a.get(this.selectedOption).then(function(e){var r=l.g("svg");r.append("g").attr("id","sumGroup");var i=l.i().on("zoom",function(t){l.g("svg g").attr("transform",t.transform)});r.call(i);var n=e.data;t.skemaVersion=n.schema_version;var a=n.modules[0],o=a.fn,s=a.fn_array;mt(b(o),s,0)}).catch(function(t){console.error(t)})},triggerFileInput:function(){this.$refs.fileInput.click()},handleFileChange:function(t){var e=this;if(this.selectedFile=t.target.files[0],this.selectedFile){var r=new FileReader;r.onload=function(t){try{var r=JSON.parse(t.target.result),i=l.g("svg");i.append("g").attr("id","sumGroup");var n=l.i().on("zoom",function(t){l.g("svg g").attr("transform",t.transform)});i.call(n),e.skemaVersion=r.schema_version;var a=r.modules[0],o=a.fn,s=a.fn_array;mt(b(o),s,0)}catch(t){console.error("Error parsing JSON:",t)}},r.readAsText(this.selectedFile)}},downloadSVG:function(){var t=document.getElementById("mainsvg"),e=(new XMLSerializer).serializeToString(t),r=new Blob([e],{type:"image/svg+xml;charset=utf-8"}),i=URL.createObjectURL(r),n=document.createElement("a");n.href=i,n.download="mainsvg.svg",document.body.appendChild(n),n.click(),document.body.removeChild(n)},submitUrl:function(){this.excuteFunction(this.url)},excuteFunction:function(t){var e=this;l.h("g").remove(),s.a.get(t).then(function(t){var r=t.data;e.skemaVersion=r.schema_version;var i=r.modules[0],n=i.fn,a=i.fn_array;mt(b(n),a,0)}).catch(function(t){console.error(t)})}}},Ot={render:function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"container"},[r("div",{staticClass:"d-flex justify-content-start"},[r("div",{staticClass:"button-spacing"}),t._v(" "),r("select",{directives:[{name:"model",rawName:"v-model",value:t.selectedOption,expression:"selectedOption"}],staticClass:"my-select",attrs:{placeholder:"Select"},on:{change:[function(e){var r=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.selectedOption=e.target.multiple?r:r[0]},t.fetchData]}},t._l(t.options,function(e){return r("option",{key:e.value,domProps:{value:e.value}},[t._v("\n      "+t._s(e.text)+"\n    ")])}),0),t._v(" "),t._m(0),t._v(" "),r("input",{directives:[{name:"model",rawName:"v-model",value:t.url,expression:"url"}],staticClass:"url-input",attrs:{type:"text",placeholder:"Input URL of JSON file here."},domProps:{value:t.url},on:{input:function(e){e.target.composing||(t.url=e.target.value)}}}),t._v(" "),r("input",{ref:"fileInput",staticStyle:{display:"none"},attrs:{type:"file"},on:{change:t.handleFileChange}}),t._v(" "),r("button",{on:{click:t.triggerFileInput}},[t._v("\n    Choose File\n  ")]),t._v(" "),r("button",{staticClass:"btn btn-primary",on:{click:t.submitUrl}},[t._v("Submit")]),t._v(" "),r("button",{staticClass:"btn btn-primary download-button",on:{click:t.downloadSVG}},[t._v("downloadSVG")])]),t._v(" "),r("div",{staticClass:"row"},[r("div",{style:t.blockStyle,attrs:{id:"svg-container"}},[t._m(1),t._v(" "),r("div",{staticClass:"version-text"},[t._v("\n        Current File Version:\n        "),r("span",{staticClass:"highlight"},[t._v(t._s(t.skemaVersion))])]),t._v(" "),r("svg",{attrs:{id:"mainsvg",width:"1200",height:"1000",overflow:"visible"}},[r("g",{attrs:{id:"sumGroup"}})])])])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("p",[this._v(" Or ")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"version-text"},[this._v("\n        Current Supported Skema Version:\n        "),e("span",{staticClass:"highlight"},[this._v("0.1.6")])])}]};var Pt=r("VU/8")(It,Ot,!1,function(t){r("94D9")},"data-v-0ed87a68",null).exports;i.a.use(o.a);var At=new o.a({routes:[{path:"/",name:"Moviz",component:Pt}],mode:"hash"});i.a.config.productionTip=!1,new i.a({el:"#app",router:At,components:{App:a},template:"<App/>"})},"p+Xa":function(t,e){t.exports={name:"d3-flextree",version:"2.1.2",main:"build/d3-flextree.js",module:"index","jsnext:main":"index",author:{name:"Chris Maloney",url:"http://chrismaloney.org"},description:"Flexible tree layout algorithm that allows for variable node sizes.",keywords:["d3","d3-module","layout","tree","hierarchy","d3-hierarchy","plugin","d3-plugin","infovis","visualization","2d"],homepage:"https://github.com/klortho/d3-flextree",license:"WTFPL",repository:{type:"git",url:"https://github.com/klortho/d3-flextree.git"},scripts:{clean:"rm -rf build demo test","build:demo":"rollup -c --environment BUILD:demo","build:dev":"rollup -c --environment BUILD:dev","build:prod":"rollup -c --environment BUILD:prod","build:test":"rollup -c --environment BUILD:test",build:"rollup -c",lint:"eslint index.js src","test:main":"node test/bundle.js","test:browser":"node test/browser-tests.js",test:"npm-run-all test:*",prepare:"npm-run-all clean build lint test"},dependencies:{"d3-hierarchy":"^1.1.5"},devDependencies:{"babel-plugin-external-helpers":"^6.22.0","babel-preset-es2015-rollup":"^3.0.0",d3:"^4.13.0","d3-selection-multi":"^1.0.1",eslint:"^4.19.1",jsdom:"^11.6.2","npm-run-all":"^4.1.2",rollup:"^0.55.3","rollup-plugin-babel":"^2.7.1","rollup-plugin-commonjs":"^8.0.2","rollup-plugin-copy":"^0.2.3","rollup-plugin-json":"^2.3.0","rollup-plugin-node-resolve":"^3.0.2","rollup-plugin-uglify":"^3.0.0","uglify-es":"^3.3.9"}}}},["NHnr"]);
//# sourceMappingURL=app.a948b7746b254bc3f0f3.js.map