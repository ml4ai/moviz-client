webpackJsonp([1],{C1R5:function(t,e){},D7MI:function(t,e){},Jmt5:function(t,e){},NHnr:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});r("Jmt5");var i=r("7+uW"),a={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"app"}},[e("router-view")],1)},staticRenderFns:[]};var n=r("VU/8")({name:"App"},a,!1,function(t){r("D7MI")},null,null).exports,o=r("/ocq"),l=r("Cx91"),s=r("mtWM"),h=r("fZjL"),d=r.n(h),c=(r("BO1k"),r("Zrlr")),u=r.n(c),p=r("wxAW"),g=r.n(p),f=r("YVj4");r("kvU2");function y(t){var e=new f.graphlib.Graph({compound:!0});if(e.setGraph({}),e.setDefaultEdgeLabel(function(){return{}}),"bf"in t)for(var r=0;r<t.bf.length;r+=1){var i=t.bf[r],a="bf-"+r,n=i.name,o=i.function_type,l=i.value,s=i.body;e.setNode(a,{label:n,value:l,type:o,body:s});e.setNode("aux-"+a,{auxLabel:"aux",width:1,height:1})}if("pif"in t)for(var h=0;h<t.pif.length;h+=1){var d=t.pif[h],c="pif-"+h,u=d.name;e.setNode(c,{label:u,width:50,height:50}),e.setParent(c,"bf-"+(d.box-1))}if("pof"in t)for(var p=0;p<t.pof.length;p+=1){var g=t.pof[p],y="pof-"+p,v=g.name;e.setNode(y,{label:v,width:50,height:50}),e.setParent(y,"bf-"+(g.box-1))}if("opo"in t)for(var m=0;m<t.opo.length;m+=1){var x="opo-"+m,b=t.opo[m].name;e.setNode(x,{label:b,width:50,height:50})}if("opi"in t)for(var w=0;w<t.opi.length;w+=1){var _="opi-"+w,N=t.opi[w].name;e.setNode(_,{label:N,width:50,height:50})}if("wff"in t)for(var k=0;k<t.wff.length;k+=1){var E=t.wff[k],S="pif-"+(E.src-1),z="pof-"+(E.tgt-1);e.setEdge(S,z)}if("wfopi"in t)for(var M=0;M<t.wfopi.length;M+=1){var C=t.wfopi[M],L="pif-"+(C.src-1),X="opi-"+(C.tgt-1);e.setEdge(L,X)}if("wfopo"in t)for(var R=0;R<t.wfopo.length;R+=1){var T=t.wfopo[R],A="opo-"+(T.src-1),I="pof-"+(T.tgt-1);e.setEdge(A,I)}if("wopio"in t)for(var F=0;F<t.wopio.length;F+=1){var P=t.wopio[F],O="opo-"+(P.src-1),j="opi-"+(P.tgt-1);e.setEdge(O,j)}if("bc"in t)for(var B=0;B<t.bc.length;B+=1){var U=t.bc[B],G="bc-"+B,D=U.name,V=U.function_type,W=U.value,q=U.condition,H=U.body_if,Y=U.body_else;e.setNode(G,{label:D,value:W,type:V,condition:q,body_if:H,body_else:Y});e.setNode("aux-"+G,{auxLabel:"aux",width:1,height:1})}if("pic"in t)for(var J=0;J<t.pic.length;J+=1){var Z=t.pic[J],$="pic-"+J,K=Z.name;e.setNode($,{label:K,width:50,height:50}),e.setParent($,"bc-"+(Z.box-1))}if("poc"in t)for(var Q=0;Q<t.poc.length;Q+=1){var tt=t.poc[Q],et="poc-"+Q,rt=tt.name;e.setNode(et,{label:rt,width:50,height:50}),e.setParent(et,"bc-"+(tt.box-1))}if("wfc"in t)for(var it=0;it<t.wfc.length;it+=1){var at=t.wfc[it],nt="pic-"+(at.src-1),ot="pof-"+(at.tgt-1);e.setEdge(nt,ot)}if("wcf"in t)for(var lt=0;lt<t.wcf.length;lt+=1){var st=t.wcf[lt],ht="pif-"+(st.src-1),dt="poc-"+(st.tgt-1);e.setEdge(ht,dt)}if("wcc"in t)for(var ct=0;ct<t.wcc.length;ct+=1){var ut=t.wcc[ct],pt="pic-"+(ut.src-1),gt="poc-"+(ut.tgt-1);e.setEdge(pt,gt)}if("wcopi"in t)for(var ft=0;ft<t.wcopi.length;ft+=1){var yt=t.wcopi[ft],vt="pic-"+(yt.src-1),mt="opi-"+(yt.tgt-1);e.setEdge(vt,mt)}if("wcopo"in t)for(var xt=0;xt<t.wcopo.length;xt+=1){var bt=t.wcopo[xt],wt="opo-"+(bt.src-1),_t="poc-"+(bt.tgt-1);e.setEdge(wt,_t)}if("bl"in t)for(var Nt=0;Nt<t.bl.length;Nt+=1){var kt=t.bl[Nt],Et="bl-"+Nt,St=kt.name,zt=kt.function_type,Mt=kt.value,Ct=kt.condition,Lt=kt.pre,Xt=kt.body,Rt=kt.post;e.setNode(Et,{label:St,value:Mt,type:zt,condition:Ct,pre:Lt,body:Xt,post:Rt});e.setNode("aux-"+Et,{auxLabel:"aux",width:1,height:1})}if("pil"in t)for(var Tt=0;Tt<t.pil.length;Tt+=1){var At=t.pil[Tt],It="pil-"+Tt,Ft=At.name;e.setNode(It,{label:Ft,width:50,height:50}),e.setParent(It,"bl-"+(At.box-1))}if("pol"in t)for(var Pt=0;Pt<t.pol.length;Pt+=1){var Ot=t.pol[Pt],jt="pol-"+Pt,Bt=Ot.name;e.setNode(jt,{label:Bt,width:50,height:50}),e.setParent(jt,"bl-"+(Ot.box-1))}if("wfl"in t)for(var Ut=0;Ut<t.wfl.length;Ut+=1){var Gt=t.wfl[Ut],Dt="pil-"+(Gt.src-1),Vt="pof-"+(Gt.tgt-1);e.setEdge(Dt,Vt)}if("wcl"in t)for(var Wt=0;Wt<t.wcl.length;Wt+=1){var qt=t.wcl[Wt],Ht="pil-"+(qt.src-1),Yt="poc-"+(qt.tgt-1);e.setEdge(Ht,Yt)}if("wlopi"in t)for(var Jt=0;Jt<t.wlopi.length;Jt+=1){var Zt=t.wlopi[Jt],$t="pil-"+(Zt.src-1),Kt="opi-"+(Zt.tgt-1);e.setEdge($t,Kt)}if("wll"in t)for(var Qt=0;Qt<t.wll.length;Qt+=1){var te=t.wll[Qt],ee="pil-"+(te.src-1),re="pol-"+(te.tgt-1);e.setEdge(ee,re)}if("wlf"in t)for(var ie=0;ie<t.wlf.length;ie+=1){var ae=t.wlf[ie],ne="pif-"+(ae.src-1),oe="pol-"+(ae.tgt-1);e.setEdge(ne,oe)}if("wlc"in t)for(var le=0;le<t.wlc.length;le+=1){var se=t.wlc[le],he="pic-"+(se.src-1),de="pol-"+(se.tgt-1);e.setEdge(he,de)}if("wlopo"in t)for(var ce=0;ce<t.wlopo.length;ce+=1){var ue=t.wlopo[ce],pe="opo-"+(ue.src-1),ge="pol-"+(ue.tgt-1);e.setEdge(pe,ge)}if("pif"in t)for(var fe=0;fe<t.pif.length;fe+=1){var ye="pif-"+fe,ve="aux-bf-"+(t.pif[fe].box-1);e.predecessors(ye).length>0||e.setEdge(ve,ye)}if("pof"in t)for(var me=0;me<t.pof.length;me+=1){var xe="pof-"+me,be="aux-bf-"+(t.pof[me].box-1);e.successors(xe).length>0||e.setEdge(xe,be)}if("pic"in t)for(var we=0;we<t.pic.length;we+=1){var _e="pic-"+we,Ne="aux-bc-"+(t.pic[we].box-1);e.predecessors(_e).length>0||e.setEdge(Ne,_e)}if("poc"in t)for(var ke=0;ke<t.poc.length;ke+=1){var Ee="poc-"+ke,Se="aux-bc-"+(t.poc[ke].box-1);e.successors(Ee).length>0||e.setEdge(Ee,Se)}if("pil"in t)for(var ze=0;ze<t.pil.length;ze+=1){var Me="pil-"+ze,Ce="aux-bl-"+(t.pil[ze].box-1);e.predecessors(Me).length>0||e.setEdge(Ce,Me)}if("pol"in t)for(var Le=0;Le<t.pol.length;Le+=1){var Xe="pol-"+Le,Re="aux-bl-"+(t.pol[Le].box-1);e.successors(Xe).length>0||e.setEdge(Xe,Re)}e.nodes().filter(function(t){return t.startsWith("bf")}),e.nodes().filter(function(t){return t.startsWith("bc")}),e.nodes().filter(function(t){return t.startsWith("bl")}),e.nodes().filter(function(t){return t.startsWith("opo")}),e.nodes().filter(function(t){return t.startsWith("opi")});e.setGraph({ranksep:30,rankdir:"BT"}),f.layout(e),console.log(e);var Te={nodes:{},edges:[]};if(console.log(t),e.nodes().forEach(function(t){var r=e.node(t);Te.nodes[t]={x:r.x,y:r.y,width:r.width,height:r.height,label:r.label,type:r.type,value:r.value,body:r.body,condition:r.condition,body_if:r.body_if,body_else:r.body_else,pre:r.pre,post:r.post}}),e.edges().forEach(function(t,e){Te.edges.push({id:e,source:t.v,target:t.w})}),"bf"in t)for(var Ae=function(e){var r="bf-"+e;if("pif"in t&&"pof"in t){var i=t.pof.find(function(t){return t.box===e+1}),a=t.pif.find(function(t){return t.box===e+1});Te.nodes[r].fullBox=!(!i||!a)}else Te.nodes[r].fullBox=!1},Ie=0;Ie<t.bf.length;Ie+=1)Ae(Ie);if("bc"in t)for(var Fe=function(e){var r="bc-"+e;if("pic"in t&&"poc"in t){var i=t.poc.find(function(t){return t.box===e+1}),a=t.pic.find(function(t){return t.box===e+1});Te.nodes[r].fullBox=!(!i||!a)}else Te.nodes[r].fullBox=!1},Pe=0;Pe<t.bc.length;Pe+=1)Fe(Pe);if("bl"in t)for(var Oe=function(e){var r="bl-"+e;if("pil"in t&&"pol"in t){var i=t.pol.find(function(t){return t.box===e+1}),a=t.pil.find(function(t){return t.box===e+1});Te.nodes[r].fullBox=!(!i||!a)}else Te.nodes[r].fullBox=!1},je=0;je<t.bl.length;je+=1)Oe(je);return Te.meta={},Te.meta.name=t.b[0].name,Te.meta.identifier=t.b[0].function_type+"-"+t.b[0].metadata,Te.meta.type=t.b[0].function_type,Te}!function(){function t(e){var r=this;u()(this,t),this.parent={},e.forEach(function(t){return r.parent[t]=t})}g()(t,[{key:"find",value:function(t){return this.parent[t]!==t&&(this.parent[t]=this.find(this.parent[t])),this.parent[t]}},{key:"union",value:function(t,e){var r=this.find(t),i=this.find(e);r!==i&&(this.parent[i]=r)}}])}();var v=r("d7EF"),m=r.n(v),x=r("gRE1"),b=r.n(x),w=r("Gu7T"),_=r.n(w),N=r("mvHQ"),k=r.n(N);function E(t,e,r,i,a,n){var o=Number(l.g("#boxid"+i).select("#"+t).attr("x"))+Number(l.g("#boxid"+i).select("#"+t).attr("width")),s=Number(l.g("#boxid"+i).select("#"+t).attr("y"))+Number(l.g("#boxid"+i).select("#"+t).attr("height"))/2,h=Number(l.g("#"+e).attr("x"))+r[0],d=Number(l.g("#"+e).attr("x"))+r[0],c=Number(l.g("#"+e).attr("y"))+r[1],u=Number(l.g("#"+e).attr("y"))+Number(l.g("#"+e).attr("height"))+r[1],p=h-o,g=c-s,f=d-o,y=u-s,v={},m={},x={},b={};v.x=o+.375*p,v.y=s+.3*g,m.x=o+.75*.8*p,m.y=s+.75*g,x.x=o+.375*f,x.y=s+.3*y,b.x=o+.75*.8*f,b.y=s+.75*y;var w=l.g("svg").append("g").attr("id","line"+String(i)+"_"+String(a)).attr("class","drawer");w.attr("sourceid",t).attr("targetid",e).attr("locationTransform",r).attr("body_num_source",i).attr("body_num_target",a).attr("color",n);var _=[{x:o,y:s},{x:v.x,y:v.y},{x:m.x,y:m.y},{x:h,y:c+17}],N=[{x:o,y:s},{x:x.x,y:x.y},{x:b.x,y:b.y},{x:d,y:u-17}],k=l.e().x(function(t){return t.x}).y(function(t){return t.y}).curve(l.c),E=k(_),S=document.createElementNS("http://www.w3.org/2000/svg","path");S.setAttribute("d",E);var z=k(N),M=document.createElementNS("http://www.w3.org/2000/svg","path");M.setAttribute("d",z);for(var C=S.getTotalLength(),L=M.getTotalLength(),X=[],R=0;R<500;R++){var T=S.getPointAtLength(R*C/499);X.push({x:T.x,y:T.y})}for(var A=[],I=0;I<500;I++){var F=M.getPointAtLength(I*L/499);A.push({x:F.x,y:F.y})}var P=l.f().domain(l.d(_,function(t){return t.x})).range([0,p]),O=l.b(function(t){return t.x}).left,j=l.f().domain(l.d(N,function(t){return t.x})).range([0,p]),B=l.b(function(t){return t.x}).left,U=l.a().x(function(t){return t.x}).y0(function(t){var e=t.x,r=O(X,P.invert(e));r>=X.length-1&&(r=X.length-2),r<1&&(r=1);var i=X[r-1],a=X[r+1],n=Math.abs((a.y-i.y)/(a.x-i.x)),l=6*Math.pow((t.x-o+2)/p,.38);return t.y-Math.sqrt(1+Math.pow(n,2))*l}).y1(function(t){var e=t.x,r=O(X,P.invert(e));r>=X.length-1&&(r=X.length-2),r<1&&(r=1);var i=X[r-1],a=X[r+1],n=Math.abs((a.y-i.y)/(a.x-i.x)),l=6*Math.pow((t.x-o+2)/p,.38);return t.y+Math.sqrt(1+Math.pow(n,2))*l}).curve(l.c),G=l.a().x(function(t){return t.x}).y0(function(t){var e=t.x,r=B(A,j.invert(e));r>=A.length-1&&(r=A.length-2),r<1&&(r=1);var i=A[r-1],a=A[r+1],n=Math.abs((a.y-i.y)/(a.x-i.x)),l=6*Math.pow((t.x-o+2)/p,.38);return t.y-Math.sqrt(1+Math.pow(n,2))*l}).y1(function(t){var e=t.x,r=B(A,j.invert(e));r>=A.length-1&&(r=A.length-2),r<1&&(r=1);var i=A[r-1],a=A[r+1],n=Math.abs((a.y-i.y)/(a.x-i.x)),l=6*Math.pow((t.x-o+2)/p,.38);return t.y+Math.sqrt(1+Math.pow(n,2))*l}).curve(l.c);w.append("path").datum(_).attr("d",U).attr("id","path1").attr("fill",n),w.append("path").datum(N).attr("d",G).attr("id","path2").attr("fill",n);l.g("#boxid"+i).selectAll("rect").each(function(i,o){var s=l.g(this);if(s.attr("id")!==t){var h=s.attr("data-body");if(void 0!==h&&null!==h&&h===a.split("-")[1]){s.attr("data-opened",!0);var d=Number(s.attr("x"))+Number(s.attr("width")),c=Number(s.attr("y"))+Number(s.attr("height"))/2,u=Number(l.g("#"+e).attr("x"))+r[0],p=Number(l.g("#"+e).attr("y"))+r[1]+Number(l.g("#"+e).attr("height"))/2;w.append("circle").attr("cx",u).attr("cy",p).attr("r",7).attr("fill",n),w.append("line").attr("x1",d).attr("y1",c).attr("x2",u).attr("y2",p).attr("stroke-width",3).attr("stroke",n).attr("stroke-dasharray","5,5").attr("marker-end","url(#arrow)").attr("class","arrowLine")}}})}function S(t,e,r,i,a,n,o){var s=Number(l.g("#boxid"+i).select("#"+t).attr("x"))+Number(l.g("#boxid"+i).select("#"+t).attr("width")),h=Number(l.g("#boxid"+i).select("#"+t).attr("y"))+Number(l.g("#boxid"+i).select("#"+t).attr("height"))/2,d=Number(l.g("#"+e).attr("x"))+r[0],c=Number(l.g("#"+e).attr("x"))+r[0],u=Number(l.g("#"+e).attr("y"))+r[1],p=Number(l.g("#"+e).attr("y"))+Number(l.g("#"+e).attr("height"))+r[1],g=d-s,f=u-h,y=c-s,v=p-h,m={},x={},b={},w={};m.x=s+.375*g,m.y=h+.3*f,x.x=s+.75*.8*g,x.y=h+.75*f,b.x=s+.375*y,b.y=h+.3*v,w.x=s+.75*.8*y,w.y=h+.75*v;var _=l.g("#"+o);_.attr("sourceid",t).attr("targetid",e).attr("locationTransform",r).attr("body_num_source",i).attr("body_num_target",a).attr("color",n);var N=[{x:s,y:h},{x:m.x,y:m.y},{x:x.x,y:x.y},{x:d,y:u+17}],k=[{x:s,y:h},{x:b.x,y:b.y},{x:w.x,y:w.y},{x:c,y:p-17}],E=l.e().x(function(t){return t.x}).y(function(t){return t.y}).curve(l.c),S=E(N),z=document.createElementNS("http://www.w3.org/2000/svg","path");z.setAttribute("d",S);var M=E(k),C=document.createElementNS("http://www.w3.org/2000/svg","path");C.setAttribute("d",M);for(var L=z.getTotalLength(),X=C.getTotalLength(),R=[],T=0;T<500;T++){var A=z.getPointAtLength(T*L/499);R.push({x:A.x,y:A.y})}for(var I=[],F=0;F<500;F++){var P=C.getPointAtLength(F*X/499);I.push({x:P.x,y:P.y})}var O=l.f().domain(l.d(N,function(t){return t.x})).range([0,g]),j=l.b(function(t){return t.x}).left,B=l.f().domain(l.d(k,function(t){return t.x})).range([0,g]),U=l.b(function(t){return t.x}).left,G=l.a().x(function(t){return t.x}).y0(function(t){var e=t.x,r=j(R,O.invert(e));r>=R.length-1&&(r=R.length-2),r<1&&(r=1);var i=R[r-1],a=R[r+1],n=Math.abs((a.y-i.y)/(a.x-i.x)),o=6*Math.pow((t.x-s+2)/g,.38);return t.y-Math.sqrt(1+Math.pow(n,2))*o}).y1(function(t){var e=t.x,r=j(R,O.invert(e));r>=R.length-1&&(r=R.length-2),r<1&&(r=1);var i=R[r-1],a=R[r+1],n=Math.abs((a.y-i.y)/(a.x-i.x)),o=6*Math.pow((t.x-s+2)/g,.38);return t.y+Math.sqrt(1+Math.pow(n,2))*o}).curve(l.c),D=l.a().x(function(t){return t.x}).y0(function(t){var e=t.x,r=U(I,B.invert(e));r>=I.length-1&&(r=I.length-2),r<1&&(r=1);var i=I[r-1],a=I[r+1],n=Math.abs((a.y-i.y)/(a.x-i.x)),o=6*Math.pow((t.x-s+2)/g,.38);return t.y-Math.sqrt(1+Math.pow(n,2))*o}).y1(function(t){var e=t.x,r=U(I,B.invert(e));r>=I.length-1&&(r=I.length-2),r<1&&(r=1);var i=I[r-1],a=I[r+1],n=Math.abs((a.y-i.y)/(a.x-i.x)),o=6*Math.pow((t.x-s+2)/g,.38);return t.y+Math.sqrt(1+Math.pow(n,2))*o}).curve(l.c);_.select("#path1").datum(N).transition().duration(720).attr("d",G).attr("fill",n),_.select("#path2").datum(k).transition().duration(720).attr("d",D).attr("fill",n);l.g("#boxid"+i).selectAll("rect").each(function(i,o){var s=l.g(this);if(s.attr("id")!==t){var h=s.attr("data-body");if(void 0!==h&&null!==h&&h===a.split("-")[1]){var d=Number(s.attr("x"))+Number(s.attr("width")),c=Number(s.attr("y"))+Number(s.attr("height"))/2,u=Number(l.g("#"+e).attr("x"))+r[0],p=Number(l.g("#"+e).attr("y"))+r[1]+Number(l.g("#"+e).attr("height"))/2;_.select("circle").transition().duration(720).attr("cx",u).attr("cy",p).attr("r",7).attr("fill",n),_.select("line").transition().duration(720).attr("x1",d).attr("y1",c).attr("x2",u).attr("y2",p).attr("stroke-width",3).attr("stroke",n).attr("stroke-dasharray","5,5").attr("marker-end","url(#arrow)").attr("class","arrowLine")}}})}function z(t,e,r,i,a){var n="frame"+e,o=t[r][0]-t[e][0]-Number(l.g("#"+n).attr("width")),s=t[r][1]-t[e][1],h=Number(l.g("#"+n).attr("x"))+Number(l.g("#"+n).attr("width")),d=Number(l.g("#"+n).attr("y"))+Number(l.g("#"+n).attr("height"))/2,c=h+o,u=d+s,p=l.g("svg").append("g").attr("id","line"+String(e)+"_"+String(r)).attr("line-type","dashed").attr("class","drawer");p.append("defs").append("marker").attr("id","arrow").attr("markerWidth",5).attr("markerHeight",3.5).attr("refX",5).attr("refY",1.75).attr("orient","auto").append("path").attr("d","M0,0 L5,1.75 L0,3.5 Z").style("fill","gray"),p.append("line").attr("x1",h).attr("y1",d).attr("x2",c).attr("y2",u).attr("stroke-width",5).attr("stroke",i).attr("stroke-dasharray","5,5").attr("marker-end","url(#arrow)").attr("class","arrowLine");var g=(h+c)/2-45,f=(d+u)/2-5;p.append("text").attr("x",g).attr("y",f).text(a).style("font-size","30px").style("fill","black")}function M(t,e,r,i,a,n){var o="frame"+e,s=t[r][0]-t[e][0]-Number(l.g("#"+o).attr("width")),h=t[r][1]-t[e][1],d=Number(l.g("#"+o).attr("x"))+Number(l.g("#"+o).attr("width")),c=Number(l.g("#"+o).attr("y"))+Number(l.g("#"+o).attr("height"))/2,u=d+s,p=c+h,g=l.g("svg").select("#"+n);g.select("line").transition().duration(720).attr("x1",d).attr("y1",c).attr("x2",u).attr("y2",p).attr("stroke-width",5).attr("stroke",i).attr("stroke-dasharray","5,5").attr("marker-end","url(#arrow)").attr("class","arrowLine");var f=(d+u)/2-45,y=(c+p)/2-5;g.select("text").transition().duration(720).attr("x",f).attr("y",y).text(a).style("font-size","30px").style("fill","black")}function C(t,e){if(t.length!==e.length)return!1;for(var r=0;r<t.length;r++)if(t[r]!==e[r])return!1;return!0}function L(t,e){e(t),t.children&&t.children.forEach(function(t){return L(t,e)}),t._children&&t._children.forEach(function(t){return L(t,e)})}function X(t,e){console.log(e),e.forEach(function(e){var r=t,i=2;e.path.forEach(function(t){if(0!==Number(t))if(i<=e.path.length-1){var a=r.children.filter(function(e){return Number(e.name)===Number(t)})[0];i+=1,r=a}else t===e.path[e.path.length-1]&&(r.hasOwnProperty("children")?(r.children.push(e),r.children.sort(function(t,e){for(var r=t.oName.split("-").map(Number),i=e.oName.split("-").map(Number),a=0;a<r.length;a++){if(r[a]<i[a])return-1;if(r[a]>i[a])return 1}return 0})):r.children=[e])})})}function R(){var t=l.g("svg").selectAll("g"),e=[],r=[],i=[],a=[];t.each(function(){var t=this.getBoundingClientRect();e.push(t.top),r.push(t.left),i.push(t.right),a.push(t.bottom)});var n=Math.max.apply(Math,i)-Math.min.apply(Math,r),o=Math.max.apply(Math,a)-Math.min.apply(Math,e);Math.min(2e3/n,2e3/o);t.attr("transform",function(t,e,r){var i=l.g(r[e]).attr("transform").match(/translate\(([^)]+)\)/),a=0,n=0;if(i){var o=i[1].split(",").map(Number),s=m()(o,2);a=s[0],n=s[1]}return"translate("+a+", "+n+")"})}var T=r("Zx67"),A=r.n(T),I=r("zwoO"),F=r.n(I),P=r("Pf15"),O=r.n(P),j=r("woOf"),B=r.n(j),U=r("u2KI"),G=r.n(U),D=r("0PjT"),V=G()({children:function(t){return t.children},nodeSize:function(t){return t.data.size},spacing:0});function W(t){var e=B()({},V,t);function r(t){var r=e[t];return"function"==typeof r?r:function(){return r}}function i(t){var e,i,o,l=n((e=a(),i=r("nodeSize"),o=r("spacing"),function(t){function e(t){u()(this,e);var r=F()(this,(e.__proto__||A()(e)).call(this,t));return B()(r,{x:0,y:0,relX:0,prelim:0,shift:0,change:0,lExt:r,lExtRelX:0,lThr:null,rExt:r,rExtRelX:0,rThr:null}),r}return O()(e,t),g()(e,[{key:"spacing",value:function(t){return o(this.data,t.data)}},{key:"update",value:function(){return q(this),H(this),this}},{key:"size",get:function(){return i(this.data)}},{key:"x",get:function(){return this.data.x},set:function(t){this.data.x=t}},{key:"y",get:function(){return this.data.y},set:function(t){this.data.y=t}}]),e}(e)),t,function(t){return t.children});return l.update(),l.data}function a(){var t=r("nodeSize"),e=r("spacing");return function(r){function i(t){return u()(this,i),F()(this,(i.__proto__||A()(i)).call(this,t))}return O()(i,r),g()(i,[{key:"copy",value:function(){var t=n(this.constructor,this,function(t){return t.children});return t.each(function(t){return t.data=t.data.data}),t}},{key:"spacing",value:function(t){return e(this,t)}},{key:"size",get:function(){return t(this)}},{key:"nodes",get:function(){return this.descendants()}},{key:"xSize",get:function(){return this.size[0]}},{key:"ySize",get:function(){return this.size[1]}},{key:"top",get:function(){return this.y}},{key:"bottom",get:function(){return this.y+this.ySize}},{key:"left",get:function(){return this.x-this.xSize/2}},{key:"right",get:function(){return this.x+this.xSize/2}},{key:"root",get:function(){var t=this.ancestors();return t[t.length-1]}},{key:"numChildren",get:function(){return this.hasChildren?this.children.length:0}},{key:"hasChildren",get:function(){return!this.noChildren}},{key:"noChildren",get:function(){return null===this.children}},{key:"firstChild",get:function(){return this.hasChildren?this.children[0]:null}},{key:"lastChild",get:function(){return this.hasChildren?this.children[this.numChildren-1]:null}},{key:"extents",get:function(){return(this.children||[]).reduce(function(t,e){return i.maxExtents(t,e.extents)},this.nodeExtents)}},{key:"nodeExtents",get:function(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}],[{key:"maxExtents",value:function(t,e){return{top:Math.min(t.top,e.top),bottom:Math.max(t.bottom,e.bottom),left:Math.min(t.left,e.left),right:Math.max(t.right,e.right)}}}]),i}(D.a.prototype.constructor)}function n(t,e,r){return function e(i,a){var n=new t(i);B()(n,{parent:a,depth:null===a?0:a.depth+1,height:0,length:1});var o=r(i)||[];return n.children=0===o.length?null:o.map(function(t){return e(t,n)}),n.children&&B()(n,n.children.reduce(function(t,e){return{height:Math.max(t.height,e.height+1),length:t.length+e.length}},n)),n}(e,null)}return B()(i,{nodeSize:function(t){return arguments.length?(e.nodeSize=t,i):e.nodeSize},spacing:function(t){return arguments.length?(e.spacing=t,i):e.spacing},children:function(t){return arguments.length?(e.children=t,i):e.children},hierarchy:function(t,r){var i=void 0===r?e.children:r;return n(a(),t,i)},dump:function(t){var e=r("nodeSize");return function t(r){return function(i){var a=r+"  ",n=r+"    ",o=i.x,l=i.y,s=e(i),h=i.children||[],d=0===h.length?" ":","+a+"children: ["+n+h.map(t(n)).join(n)+a+"],"+r;return"{ size: ["+s.join(", ")+"],"+a+"x: "+o+", y: "+l+d+"},"}}("\n")(t)}}),i}var q=function t(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e.y=r,(e.children||[]).reduce(function(r,i){var a=m()(r,2),n=a[0],o=a[1];t(i,e.y+e.ySize);var l=(0===n?i.lExt:i.rExt).bottom;return 0!==n&&J(e,n,o),[n+1,it(l,n,o)]},[0,null]),Y(e),rt(e),e},H=function t(e,r,i){void 0===r&&(r=-e.relX-e.prelim,i=0);var a=r+e.relX;return e.relX=a+e.prelim-i,e.prelim=0,e.x=i+e.relX,(e.children||[]).forEach(function(r){return t(r,a,e.x)}),e},Y=function(t){(t.children||[]).reduce(function(t,e){var r=m()(t,2),i=r[0],a=r[1],n=i+e.shift,o=a+n+e.change;return e.relX+=o,[n,o]},[0,0])},J=function(t,e,r){for(var i=t.children[e-1],a=t.children[e],n=i,o=i.relX,l=a,s=a.relX,h=!0;n&&l;){n.bottom>r.lowY&&(r=r.next);var d=o+n.prelim-(s+l.prelim)+n.xSize/2+l.xSize/2+n.spacing(l);(d>0||d<0&&h)&&(s+=d,Z(a,d),$(t,e,r.index,d)),h=!1;var c=n.bottom,u=l.bottom;c<=u&&(n=Q(n))&&(o+=n.relX),c>=u&&(l=K(l))&&(s+=l.relX)}!n&&l?tt(t,e,l,s):n&&!l&&et(t,e,n,o)},Z=function(t,e){t.relX+=e,t.lExtRelX+=e,t.rExtRelX+=e},$=function(t,e,r,i){var a=t.children[e],n=e-r;if(n>1){var o=i/n;t.children[r+1].shift+=o,a.shift-=o,a.change-=i-o}},K=function(t){return t.hasChildren?t.firstChild:t.lThr},Q=function(t){return t.hasChildren?t.lastChild:t.rThr},tt=function(t,e,r,i){var a=t.firstChild,n=a.lExt,o=t.children[e];n.lThr=r;var l=i-r.relX-a.lExtRelX;n.relX+=l,n.prelim-=l,a.lExt=o.lExt,a.lExtRelX=o.lExtRelX},et=function(t,e,r,i){var a=t.children[e],n=a.rExt,o=t.children[e-1];n.rThr=r;var l=i-r.relX-a.rExtRelX;n.relX+=l,n.prelim-=l,a.rExt=o.rExt,a.rExtRelX=o.rExtRelX},rt=function(t){if(t.hasChildren){var e=t.firstChild,r=t.lastChild,i=(e.prelim+e.relX-e.xSize/2+r.relX+r.prelim+r.xSize/2)/2;B()(t,{prelim:i,lExt:e.lExt,lExtRelX:e.lExtRelX,rExt:r.rExt,rExtRelX:r.rExtRelX})}},it=function(t,e,r){for(;null!==r&&t>=r.lowY;)r=r.next;return{lowY:t,index:e,next:r}};function at(t,e,r,i,a,n){var o=l.g("#boxid"+String(r)).select("#"+String(i));if(n||"true"===o.attr("data-opened"))return l.g("#boxid"+String(r)).selectAll("[data-opened='true']").attr("data-opened","false"),void l.h(".drawer").each(function(t,i){var a=this,n=l.g(this).attr("id").replace("line","").replace("boxid",""),o=(String(r)+"-"+String(e)).split("-");if(2===n.split("_").length){var s=!1,h=n.split("_")[0],d=n.split("_")[1],c=h.split("-"),u=d.split("-");if(C(c,o))l.g(this).transition().duration(200).style("opacity",0).end().then(function(){l.g(a).remove()}),s=!0;else if(c.length>o.length){var p=c.slice(0,o.length);k()(p)===k()(o)&&(l.g(this).transition().duration(200).style("opacity",0).end().then(function(){l.g(a).remove()}),s=!0)}if(!s)if(C(u,o))l.g(this).transition().duration(200).style("opacity",0).end().then(function(){l.g(a).remove()});else if(u.length>o.length){var g=u.slice(0,o.length);k()(g)===k()(o)&&l.g(this).transition().duration(200).style("opacity",0).end().then(function(){l.g(a).remove()})}}else{var f=n.split("-");if(C(f,o))l.g(this).transition().duration(200).style("opacity",0).end().then(function(){l.g(a).remove()});else if(f.length>o.length){var y=f.slice(0,o.length);k()(y)===k()(o)&&l.g(this).transition().duration(200).style("opacity",0).end().then(function(){l.g(a).remove()})}}});r=String(r);var s=y(t[e-1]),h=String(r)+"-"+String(e);lt(s,t,h);var c={},u=[];l.h(".drawer").each(function(t,e){var r=l.g(this).attr("id").replace("boxid","");if(2!==r.split("_").length){var i=r.split("-"),a=i[i.length-1];if("0"===a)c.name=Number(a),c.oName=r,c.path=i,c.size=[Number(l.g(this).attr("width"))+100,Number(l.g(this).attr("height"))];else{var n={};n.name=Number(a),n.size=[Number(l.g(this).attr("width"))+100,Number(l.g(this).attr("height"))],n.path=i,n.oName=r,u.push(n)}}});u.sort(function(t,e){return t.path.length-e.path.length}),X(c,u),L(c,function(t){Array.isArray(t.size)&&(t._size||(t._size=t.size.slice()),t.size=t._size.slice().reverse())});var p=W({spacing:80}),g=p(p.hierarchy(c));g.each(function(t){var e=t.x;t.x=t.y,t.y=e});var f={};g.each(function(t){f[t.data.oName]=[t.x,t.y,t.data.size[1],1*t.data.size[0]]});d()(f);console.log(f);var v=f[h][0]-f[r][0],m=f[h][1]-f[h][3]/2-(f[r][1]-f[r][3]/2);E(i,"frame"+h,[v,m],r,h,a),l.h(".drawer").each(function(t,e){var r=l.g(this).attr("id").replace("boxid","");2!==r.split("_").length&&(r===h?(l.g(this).attr("transform","translate("+(f[r][0]+90)+","+(f[r][1]+675-f[r][3]/2)+")").attr("opacity",0),l.g(this).transition().duration(920).style("opacity",1)):l.g(this).transition().duration(720).attr("transform","translate("+(f[r][0]+90)+","+(f[r][1]+675-f[r][3]/2)+")"))}),l.h(".drawer").each(function(t,e){var r=l.g(this).attr("id").replace("boxid","");if(2===r.split("_").length)if("dashed"!==l.g(this).attr("line-type")){var i=r,a=r.replace("line","").split("_")[0],n=r.replace("line","").split("_")[1],o=l.g("#boxid"+a).attr("transform"),s=l.g("#boxid"+n).attr("transform");if(null!==o&&a!=h){var d,c=o.slice(10,-1).split(",").map(Number);d=[f[a][0]+90,f[a][1]+675-f[a][3]/2];var u=[f[n][0]-f[a][0],f[n][1]-f[n][3]/2-(f[a][1]-f[a][3]/2)];if(c[1]!==d[1]||c[0]!==d[0])S(l.g(this).attr("sourceid"),l.g(this).attr("targetid"),u,l.g(this).attr("body_num_source"),l.g(this).attr("body_num_target"),l.g(this).attr("color"),i)}if(null!==s&&n!=h){var p,g=s.slice(10,-1).split(",").map(Number),y=[f[n][0]-f[a][0],f[n][1]-f[n][3]/2-(f[a][1]-f[a][3]/2)];if(p=[f[n][0]+90,f[n][1]+675-f[n][3]/2],g[1]!==p[1]||g[0]!==p[0])S(l.g(this).attr("sourceid"),l.g(this).attr("targetid"),y,l.g(this).attr("body_num_source"),l.g(this).attr("body_num_target"),l.g(this).attr("color"),i)}r=(r=r.replace("line","")).split("_")[0],l.g(this).attr("transform","translate("+(f[r][0]+90)+","+(f[r][1]+675-f[r][3]/2)+")").style("opacity",.38)}else{var v=r,m=r.replace("line","").split("_")[0],x=r.replace("line","").split("_")[1],b=l.g("#boxid"+m).attr("transform"),w=l.g("#boxid"+x).attr("transform");if(null!==b&&m!=h){var _,N=b.slice(10,-1).split(",").map(Number);if(_=[f[m][0]+90,f[m][1]+675-f[m][3]/2],N[1]!==_[1]||N[0]!==_[0]){var k=l.g(this).select("text").text();M(f,m,x,"black",k,v)}}if(null!==w&&x!=h){var E,z=w.slice(10,-1).split(",").map(Number);if(E=[f[x][0]+90,f[x][1]+675-f[x][3]/2],z[1]!==E[1]||z[0]!==E[0]){var C=l.g(this).select("text").text();M(f,m,x,"black",C,v)}}r=(r=r.replace("line","")).split("_")[0],l.g(this).transition().duration(720).attr("transform","translate("+(f[r][0]+90)+","+(f[r][1]+675-f[r][3]/2)+")")}}),l.i().duration(1200).end().then(function(){R()})}var nt=r("izJC");function ot(t,e,r,i,a,n,o,s,h){var c=l.g("#boxid"+String(n)).select("#"+String(o));if(h||"true"===c.attr("data-opened"))return l.g("#boxid"+String(n)).selectAll("[data-opened='true']").attr("data-opened","false"),void l.h(".drawer").each(function(t,r){var i=this,a=l.g(this).attr("id").replace("line","").replace("boxid",""),o=(String(n)+"-"+String(e)).split("-");if(2===a.split("_").length){var s=!1,h=a.split("_")[0],d=a.split("_")[1],c=h.split("-"),u=d.split("-");if(C(c,o))l.g(this).transition().duration(200).style("opacity",0).end().then(function(){l.g(i).remove()}),s=!0;else if(c.length>o.length){var p=c.slice(0,o.length);k()(p)===k()(o)&&(l.g(this).transition().duration(200).style("opacity",0).end().then(function(){l.g(i).remove()}),s=!0)}if(!s)if(C(u,o))l.g(this).transition().duration(200).style("opacity",0).end().then(function(){l.g(i).remove()});else if(u.length>o.length){var g=u.slice(0,o.length);k()(g)===k()(o)&&l.g(this).transition().duration(200).style("opacity",0).end().then(function(){l.g(i).remove()})}}else{var f=a.split("-");if(C(f,o))l.g(this).transition().duration(200).style("opacity",0).end().then(function(){l.g(i).remove()});else if(f.length>o.length){var y=f.slice(0,o.length);k()(y)===k()(o)&&l.g(this).transition().duration(200).style("opacity",0).end().then(function(){l.g(i).remove()})}}});n=String(n);var u=String(n)+"-"+String(e),p=String(u)+"-"+String(r),g=String(u)+"-"+String(i),f=String(u)+"-"+String(a);void 0!==e&&lt(y(t[e-1]),t,u),void 0!==r&&lt(y(t[r-1]),t,p),void 0!==i&&lt(y(t[i-1]),t,g),void 0!==a&&lt(y(t[a-1]),t,f);var v={},m=[];l.h(".drawer").each(function(t,e){var r=l.g(this).attr("id").replace("boxid","");if(2!==r.split("_").length){var i=r.split("-"),a=i[i.length-1];if("0"===a)v.name=Number(a),v.oName=r,v.path=i,v.size=[Number(l.g(this).attr("width"))+100,Number(l.g(this).attr("height"))];else{var n={};n.name=Number(a),n.size=[Number(l.g(this).attr("width"))+100,Number(l.g(this).attr("height"))],n.path=i,n.oName=r,m.push(n)}}});m.sort(function(t,e){return t.path.length-e.path.length}),X(v,m),L(v,function(t){Array.isArray(t.size)&&(t._size||(t._size=t.size.slice()),t.size=t._size.slice().reverse())});var x=nt.a({spacing:80});console.log(v);var b=x(x.hierarchy(v));b.each(function(t){var e=t.x;t.x=t.y,t.y=e});var w={};b.each(function(t){w[t.data.oName]=[t.x,t.y,t.data.size[1],1*t.data.size[0]]});d()(w);console.log(w),console.log();var _=w[u][0]-w[n][0],N=w[u][1]-w[u][3]/2-(w[n][1]-w[n][3]/2);E(o,"frame"+u,[_,N],n,u,s),void 0!==r&&z(w,u,p,"black","PRE"),void 0!==i&&z(w,u,g,"black","WHILE TRUE"),void 0!==a&&z(w,u,f,"black","POST"),l.h(".drawer").each(function(t,e){var r=l.g(this).attr("id").replace("boxid","");if(2===r.split("_").length)if("dashed"!==l.g(this).attr("line-type")){var i=r,a=r.replace("line","").split("_")[0],n=r.replace("line","").split("_")[1],o=l.g("#boxid"+a).attr("transform"),s=l.g("#boxid"+n).attr("transform");if(null!==o&&a!=u){var h,d=o.slice(10,-1).split(",").map(Number);h=[w[a][0]+90,w[a][1]+675-w[a][3]/2];var c=[w[n][0]-w[a][0],w[n][1]-w[n][3]/2-(w[a][1]-w[a][3]/2)];if(d[1]!==h[1]||d[0]!==h[0]){var y=l.g(this).attr("sourceid"),v=l.g(this).attr("targetid");l.g(this).attr("locationTransform").split(",");S(y,v,c,l.g(this).attr("body_num_source"),l.g(this).attr("body_num_target"),l.g(this).attr("color"),i)}}if(null!==s&&n!=u){var m,x=s.slice(10,-1).split(",").map(Number);m=[w[n][0]+90,w[n][1]+675-w[n][3]/2];var b=[w[n][0]-w[a][0],w[n][1]-w[n][3]/2-(w[a][1]-w[a][3]/2)];if(x[1]!==m[1]||x[0]!==m[0]){var _=l.g(this).attr("sourceid"),N=l.g(this).attr("targetid");l.g(this).attr("locationTransform").split(",");S(_,N,b,l.g(this).attr("body_num_source"),l.g(this).attr("body_num_target"),l.g(this).attr("color"),i)}}r=(r=r.replace("line","")).split("_")[0],l.g(this).attr("transform","translate("+(w[r][0]+90)+","+(w[r][1]+675-w[r][3]/2)+")").style("opacity",.38)}else{var k=r,E=r.replace("line","").split("_")[0],z=r.replace("line","").split("_")[1],C=l.g("#boxid"+E).attr("transform"),L=l.g("#boxid"+z).attr("transform");if(null!==C&&E!=u){var X,R=C.slice(10,-1).split(",").map(Number);if(X=[w[E][0]+90,w[E][1]+675-w[E][3]/2],R[1]!==X[1]||R[0]!==X[0]){var T=l.g(this).select("text").text();M(w,E,z,"black",T,k)}}if(null!==L&&z!=u){var A,I=L.slice(10,-1).split(",").map(Number);if(A=[w[z][0]+90,w[z][1]+675-w[z][3]/2],I[1]!==A[1]||I[0]!==A[0]){var F=l.g(this).select("text").text();M(w,E,z,"black",F,k)}}r=(r=r.replace("line","")).split("_")[0],l.g(this).attr("transform","translate("+(w[r][0]+90)+","+(w[r][1]+675-w[r][3]/2)+")")}else r===u||r===p||r===g||r===f?(l.g(this).attr("transform","translate("+(w[r][0]+90)+","+(w[r][1]+675-w[r][3]/2)+")").attr("opacity",0),l.g(this).transition().duration(920).style("opacity",1)):l.g(this).transition().duration(720).attr("transform","translate("+(w[r][0]+90)+","+(w[r][1]+675-w[r][3]/2)+")")}),R()}function lt(t,e,r){var i=l.g("#mainsvg").append("g").attr("id","boxid"+String(r)).attr("class","drawer"),a=t.nodes,n=!1,o=!1,s=Math.min.apply(Math,_()(b()(t.nodes).map(function(t){return t.y}))),h=Math.max.apply(Math,_()(b()(t.nodes).map(function(t){return t.y})));for(var d in a){var c=a[d],u=d.split("-"),p=m()(u,2),g=p[0],f=(p[1],"opo"===g);"opi"===g&&c.y===s&&(o=!0),f&&c.y===h&&(n=!0)}for(var y in console.log(a),a){var v=y.split("-"),x=m()(v,2),w=x[0],N=(x[1],"opo"===w);"opi"===w&&(a[y].y=o?s:s-50-37),N&&(a[y].y=n?h:h+50+37)}console.log(a);var k=1/0,E=1/0;for(var S in a){var z=S.split("-"),M=m()(z,2);M[0],M[1];a[S].x<k&&(k=a[S].x),a[S].y<E&&(E=a[S].y)}for(var C in a)a[C].x=a[C].x-k+50,a[C].y-=E;for(var L in console.log(a),a){var X=a[L],R=L.split("-"),T=m()(R,2),A=T[0],I=(T[1],"pof"===A),F="pif"===A,P="opo"===A,O="opi"===A,j="bc"===A,B="poc"===A,U="pic"===A,G="bl"===A,D="pol"===A,V="pil"===A;"aux"===A||("bf"===A?X.fullBox?"FUNCTION"==X.type?st(X,L,i,"green",37,e,r):"EXPRESSION"==X.type?st(X,L,i,"purple",37,e,r):"LITERAL"==X.type?gt(X,L,i,"red",37):"LANGUAGE_PRIMITIVE"==X.type&&ft(X,L,i,"red",37):"FUNCTION"==X.type?ht(X,L,i,"green",37,e,r):"EXPRESSION"==X.type?ht(X,L,i,"purple",37,e,r):"LITERAL"==X.type?vt(X,L,i,"red",37):"LANGUAGE_PRIMITIVE"==X.type&&yt(X,L,i,"red",37):j?X.fullBox?dt(X,L,i,"orange",37,e,r):ct(X,L,i,"orange",37,e,r):G?X.fullBox?ut(X,L,i,"blue",37,e,r):pt(X,L,i,"blue",37,e,r):(I||F||O||P||U||B||V||D)&&mt(X,L,i,"black"))}i.append("defs").append("marker").attr("id","arrowhead").attr("markerWidth",10).attr("markerHeight",7).attr("refX",10).attr("refY",3.5).attr("orient","auto").append("path").attr("d","M0,0 L10,3.5 L0,7 Z").style("fill","gray"),t.edges.forEach(function(t){var e=a[t.source],r=a[t.target],n=t.source.split("-")[0],o=t.target.split("-")[0];"aux"===n||"aux"===o||i.append("line").attr("x1",e.x).attr("y1",e.y-e.height/2).attr("x2",r.x).attr("y2",r.y+r.height/2).style("stroke","gray").style("stroke-width",2.2).attr("marker-end","url(#arrowhead)")});var W=i.node().getBBox(),q=W.width+90,H=W.height+90;"opo-0"in a&&"opi-0"in a?"MODULE"===t.meta.type?xt(i,W,q,H,22.5,37,"gray",r):"EXPRESSION"===t.meta.type?xt(i,W,q,H,22.5,37,"purple",r):"FUNCTION"===t.meta.type?xt(i,W,q,H,22.5,37,"green",r):"PREDICATE"===t.meta.type&&xt(i,W,q,H,22.5,37,"Magenta",r):"opo-0"in a&&!("opi-0"in a)?"MODULE"===t.meta.type?bt(i,W,q,H,22.5,37,"gray",r):"EXPRESSION"===t.meta.type?bt(i,W,q,H,22.5,37,"purple",r):"FUNCTION"===t.meta.type?bt(i,W,q,H,22.5,37,"green",r):"PREDICATE"===t.meta.type&&bt(i,W,q,H,22.5,37,"Magenta",r):!("opo-0"in a)&&"opi-0"in a?"MODULE"===t.meta.type?wt(i,W,q,H,22.5,37,"gray",r):"EXPRESSION"===t.meta.type?wt(i,W,q,H,22.5,37,"purple",r):"FUNCTION"===t.meta.type?wt(i,W,q,H,22.5,37,"green",r):"PREDICATE"===t.meta.type&&wt(i,W,q,H,22.5,37,"Magenta",r):"MODULE"===t.meta.type?_t(i,W,q,H,22.5,37,"gray",r):"EXPRESSION"===t.meta.type?_t(i,W,q,H,22.5,37,"purple",r):"FUNCTION"===t.meta.type?_t(i,W,q,H,22.5,37,"green",r):"PREDICATE"===t.meta.type&&_t(i,W,q,H,22.5,37,"Magenta",r),i.attr("width",i.node().getBBox().width).attr("height",i.node().getBBox().height),0===r&&i.attr("transform","translate(90,"+(675-i.node().getBBox().height/2*1)+")")}function st(t,e,r,i,a,n,o){var l=!1,s=null;void 0!==t.body&&(s=t.body);var h=r.append("rect").attr("id",e).attr("x",t.x-t.width/2).attr("y",t.y-t.height/2+a).attr("width",t.width).attr("height",t.height-2*a).attr("rx",15).attr("ry",15).attr("data-body",s).attr("data-opened","neo").style("fill","rgba(0, 0, 255, 0)").style("stroke",i).style("cursor","pointer").style("stroke-width",5);void 0!==t.label&&r.append("text").attr("x",t.x).attr("y",t.y).attr("text-anchor","middle").attr("dominant-baseline","middle").style("font-size","12px").text(t.label),void 0!==t.body&&h.on("click",function(){at(n,t.body,o,e,i,l),l=!l})}function ht(t,e,r,i,a,n,o){var l=null;void 0!==t.body&&(l=t.body);var s=!1,h=r.append("rect").attr("id",e).attr("x",t.x-t.width/2).attr("y",t.y-t.height/2-a).attr("width",t.width).attr("height",t.height).attr("rx",15).attr("ry",15).attr("data-body",l).attr("data-opened","neo").style("fill","rgba(0, 0, 255, 0)").style("cursor","pointer").style("stroke",i).style("stroke-width",5);void 0!==t.label&&r.append("text").attr("x",t.x).attr("y",t.y-t.height/4-a/2).attr("text-anchor","middle").attr("dominant-baseline","middle").style("font-size","12px").text(t.label),void 0!==t.body&&h.on("click",function(){at(n,t.body,o,e,i,s),s=!s})}function dt(t,e,r,i,a,n,o){var s=!1,h=null;void 0!==t.condition&&(h=t.condition);var c=r.append("rect").attr("id",e).attr("x",t.x-t.width/2).attr("y",t.y-t.height/2+a).attr("width",t.width).attr("height",t.height-2*a).attr("rx",15).attr("ry",15).attr("data-body",h).style("fill","rgba(0, 0, 255, 0)").style("stroke",i).style("cursor","pointer").style("stroke-width",5);void 0!==t.label&&r.append("text").attr("x",t.x).attr("y",t.y).attr("text-anchor","middle").attr("dominant-baseline","middle").style("font-size","12px").text(t.label),void 0!==t.condition&&c.on("click",function(){!function(t,e,r,i,a,n,o,s){var h=l.g("#boxid"+String(a)).select("#"+String(n));if(s||"true"===h.attr("data-opened"))return l.g("#boxid"+String(a)).selectAll("[data-opened='true']").attr("data-opened","false"),void l.h(".drawer").each(function(t,r){var i=this,n=l.g(this).attr("id").replace("line","").replace("boxid",""),o=(String(a)+"-"+String(e)).split("-");if(2===n.split("_").length){var s=!1,h=n.split("_")[0],d=n.split("_")[1],c=h.split("-"),u=d.split("-");if(C(c,o))l.g(this).transition().duration(200).style("opacity",0).end().then(function(){l.g(i).remove()}),s=!0;else if(c.length>o.length){var p=c.slice(0,o.length);k()(p)===k()(o)&&(l.g(this).transition().duration(200).style("opacity",0).end().then(function(){l.g(i).remove()}),s=!0)}if(!s)if(C(u,o))l.g(this).transition().duration(200).style("opacity",0).end().then(function(){l.g(i).remove()});else if(u.length>o.length){var g=u.slice(0,o.length);k()(g)===k()(o)&&l.g(this).transition().duration(200).style("opacity",0).end().then(function(){l.g(i).remove()})}}else{var f=n.split("-");if(C(f,o))l.g(this).transition().duration(200).style("opacity",0).end().then(function(){l.g(i).remove()});else if(f.length>o.length){var y=f.slice(0,o.length);k()(y)===k()(o)&&l.g(this).transition().duration(200).style("opacity",0).end().then(function(){l.g(i).remove()})}}});a=String(a);var c=void 0,u=y(t[e-1]),p=y(t[r-1]);void 0!==i&&(c=y(t[i-1]));var g=String(a)+"-"+String(e),f=String(g)+"-"+String(r),v=String(g)+"-"+String(i);lt(u,t,g),lt(p,t,f),void 0!==i&&lt(c,t,v);var m={},x=[];l.h(".drawer").each(function(t,e){var r=l.g(this).attr("id").replace("boxid","");if(2!==r.split("_").length){var i=r.split("-"),a=i[i.length-1];if("0"===a)m.name=Number(a),m.oName=r,m.path=i,m.size=[Number(l.g(this).attr("width"))+100,Number(l.g(this).attr("height"))];else{var n={};n.name=Number(a),n.size=[Number(l.g(this).attr("width"))+100,Number(l.g(this).attr("height"))],n.path=i,n.oName=r,x.push(n)}}}),x.sort(function(t,e){return t.path.length-e.path.length}),X(m,x),L(m,function(t){Array.isArray(t.size)&&(t._size||(t._size=t.size.slice()),t.size=t._size.slice().reverse())});var b=nt.a({spacing:80});console.log(m);var w=b(b.hierarchy(m));w.each(function(t){var e=t.x;t.x=t.y,t.y=e});var _={};w.each(function(t){_[t.data.oName]=[t.x,t.y,t.data.size[1],1*t.data.size[0]]}),d()(_),console.log(_),console.log();var N=_[g][0]-_[a][0],T=_[g][1]-_[g][3]/2-(_[a][1]-_[a][3]/2);E(n,"frame"+g,[N,T],a,g,o),z(_,g,f,"black","TRUE"),void 0!==c&&z(_,g,v,"black","FALSE"),l.h(".drawer").each(function(t,e){var r=l.g(this).attr("id").replace("boxid","");if(2===r.split("_").length)if("dashed"!==l.g(this).attr("line-type")){var i=r,a=r.replace("line","").split("_")[0],n=r.replace("line","").split("_")[1],o=l.g("#boxid"+a).attr("transform"),s=l.g("#boxid"+n).attr("transform");if(null!==o&&a!=g){var h,d=o.slice(10,-1).split(",").map(Number);h=[_[a][0]+90,_[a][1]+675-_[a][3]/2];var c=[_[n][0]-_[a][0],_[n][1]-_[n][3]/2-(_[a][1]-_[a][3]/2)];if(d[1]!==h[1]||d[0]!==h[0]){var u=l.g(this).attr("sourceid"),p=l.g(this).attr("targetid");l.g(this).attr("locationTransform").split(","),S(u,p,c,l.g(this).attr("body_num_source"),l.g(this).attr("body_num_target"),l.g(this).attr("color"),i)}}if(null!==s&&n!=g){var y,m=s.slice(10,-1).split(",").map(Number);y=[_[n][0]+90,_[n][1]+675-_[n][3]/2];var x=[_[n][0]-_[a][0],_[n][1]-_[n][3]/2-(_[a][1]-_[a][3]/2)];if(m[1]!==y[1]||m[0]!==y[0]){var b=l.g(this).attr("sourceid"),w=l.g(this).attr("targetid");l.g(this).attr("locationTransform").split(","),S(b,w,x,l.g(this).attr("body_num_source"),l.g(this).attr("body_num_target"),l.g(this).attr("color"),i)}}r=(r=r.replace("line","")).split("_")[0],l.g(this).attr("transform","translate("+(_[r][0]+90)+","+(_[r][1]+675-_[r][3]/2)+")").style("opacity",.38)}else{var N=r,k=r.replace("line","").split("_")[0],E=r.replace("line","").split("_")[1],z=l.g("#boxid"+k).attr("transform"),C=l.g("#boxid"+E).attr("transform");if(null!==z&&k!=g){var L,X=z.slice(10,-1).split(",").map(Number);if(L=[_[k][0]+90,_[k][1]+675-_[k][3]/2],X[1]!==L[1]||X[0]!==L[0]){var R=l.g(this).select("text").text();M(_,k,E,"black",R,N)}}if(null!==C&&E!=g){var T,A=C.slice(10,-1).split(",").map(Number);if(T=[_[E][0]+90,_[E][1]+675-_[E][3]/2],A[1]!==T[1]||A[0]!==T[0]){var I=l.g(this).select("text").text();M(_,k,E,"black",I,N)}}r=(r=r.replace("line","")).split("_")[0],l.g(this).attr("transform","translate("+(_[r][0]+90)+","+(_[r][1]+675-_[r][3]/2)+")")}else r===g||r===v||r===f?(l.g(this).attr("transform","translate("+(_[r][0]+90)+","+(_[r][1]+675-_[r][3]/2)+")").attr("opacity",0),l.g(this).transition().duration(920).style("opacity",1)):l.g(this).transition().duration(720).attr("transform","translate("+(_[r][0]+90)+","+(_[r][1]+675-_[r][3]/2)+")")}),R()}(n,t.condition,t.body_if,t.body_else,o,e,i,s),s=!s})}function ct(t,e,r,i,a,n,o){var l=null;void 0!==t.body&&(l=t.body);var s=!1,h=r.append("rect").attr("id",e).attr("x",t.x-t.width/2).attr("y",t.y-t.height/2-a).attr("width",t.width).attr("height",t.height).attr("rx",15).attr("ry",15).attr("data-body",l).style("fill","rgba(0, 0, 255, 0)").style("cursor","pointer").style("stroke",i).style("stroke-width",5);void 0!==t.label&&r.append("text").attr("x",t.x).attr("y",t.y-t.height/4-a/2).attr("text-anchor","middle").attr("dominant-baseline","middle").style("font-size","12px").text(t.label),void 0!==t.body&&h.on("click",function(){at(n,t.body,o,e,i,s),s=!s})}function ut(t,e,r,i,a,n,o){var l=!1,s=null;void 0!==t.condition&&(s=t.condition);var h=r.append("rect").attr("id",e).attr("x",t.x-t.width/2).attr("y",t.y-t.height/2+a).attr("width",t.width).attr("height",t.height-2*a).attr("rx",15).attr("ry",15).attr("data-body",s).style("fill","rgba(0, 0, 255, 0)").style("stroke",i).style("cursor","pointer").style("stroke-width",5);void 0!==t.label&&r.append("text").attr("x",t.x).attr("y",t.y).attr("text-anchor","middle").attr("dominant-baseline","middle").style("font-size","12px").text(t.label),void 0!==t.condition&&h.on("click",function(){ot(n,t.condition,t.pre,t.body,t.post,o,e,i,l),l=!l})}function pt(t,e,r,i,a,n,o){var l=null;void 0!==t.body&&(l=t.body);var s=!1,h=r.append("rect").attr("id",e).attr("x",t.x-t.width/2).attr("y",t.y-t.height/2-a).attr("width",t.width).attr("height",t.height).attr("rx",15).attr("ry",15).attr("data-body",l).style("fill","rgba(0, 0, 255, 0)").style("cursor","pointer").style("stroke",i).style("stroke-width",5);void 0!==t.label&&r.append("text").attr("x",t.x).attr("y",t.y-t.height/4-a/2).attr("text-anchor","middle").attr("dominant-baseline","middle").style("font-size","12px").text(t.label),void 0!==t.body&&h.on("click",function(){ot(n,t.body,o,e,i,s),s=!s})}function gt(t,e,r,i,a){r.append("rect").attr("id",e).attr("x",t.x-t.width/2).attr("y",t.y-t.height/2+a).attr("width",t.width).attr("height",t.height-2*a).style("fill","none").style("stroke",i).style("stroke-width",2),void 0!==t.label&&r.append("text").attr("x",t.x).attr("y",t.y).attr("text-anchor","middle").attr("dominant-baseline","middle").style("font-size","12px").text(t.label),void 0!==t.value&&r.append("text").attr("x",t.x).attr("y",t.y).attr("text-anchor","middle").attr("dominant-baseline","middle").style("font-size","30px").text(t.value.value)}function ft(t,e,r,i,a){r.append("rect").attr("id",e).attr("x",t.x-t.width/2).attr("y",t.y-t.height/2+a).attr("width",t.width).attr("height",t.height-2*a).style("fill","none").style("stroke",i).style("stroke-width",5),void 0!==t.label&&r.append("text").attr("x",t.x).attr("y",t.y).attr("text-anchor","middle").attr("dominant-baseline","middle").style("font-size","20px").text(t.label),void 0!==t.value&&r.append("text").attr("x",t.x).attr("y",t.y).attr("text-anchor","middle").attr("dominant-baseline","middle").style("font-size","30px").text(t.value.value)}function yt(t,e,r,i,a){r.append("rect").attr("id",e).attr("x",t.x-t.width/2).attr("y",t.y-t.height/2-a).attr("width",t.width).attr("height",t.height).style("fill","none").style("stroke",i).style("stroke-width",5),void 0!==t.label&&r.append("text").attr("x",t.x).attr("y",t.y).attr("text-anchor","middle").attr("dominant-baseline","middle").style("font-size","12px").text(t.label),void 0!==t.value&&r.append("text").attr("x",t.x).attr("y",t.y).attr("text-anchor","middle").attr("dominant-baseline","middle").style("font-size","30px").text(t.value.value)}function vt(t,e,r,i,a){r.append("rect").attr("id",e).attr("x",t.x-t.width/2+a/2).attr("y",t.y-t.height/2-a).attr("width",t.width-a).attr("height",t.height).style("fill","none").style("stroke",i).style("stroke-width",2),void 0!==t.label&&r.append("text").attr("x",t.x).attr("y",t.y).attr("text-anchor","middle").attr("dominant-baseline","middle").style("font-size","12px").text(t.label),void 0!==t.value&&r.append("text").attr("x",t.x).attr("y",t.y-1.2*a).attr("text-anchor","middle").attr("dominant-baseline","middle").style("font-size","30px").text(t.value.value)}function mt(t,e,r,i){r.append("rect").attr("id",e).attr("x",t.x-t.width/2).attr("y",t.y-t.height/2).attr("width",t.width).attr("height",t.height).style("fill","white").style("stroke",i).style("stroke-width",2),void 0!==t.label&&r.append("text").attr("x",t.x).attr("y",t.y).attr("text-anchor","middle").attr("dominant-baseline","middle").style("font-size","27px").text(t.label)}function xt(t,e,r,i,a,n,o,l){t.append("rect",":first-child").attr("id","frame"+l).attr("x",e.x-a).attr("y",e.y-a+n).attr("rx",15).attr("ry",15).attr("width",r-2*a).attr("height",i-2*a-2*n).style("fill","none").style("stroke",o).style("stroke-width",5).lower()}function bt(t,e,r,i,a,n,o,l){t.append("rect",":first-child").attr("id","frame"+l).attr("x",e.x-a).attr("y",e.y-a-n/10).attr("rx",15).attr("ry",15).attr("width",r-2*a).attr("height",i-2*a-n).style("fill","none").style("stroke",o).style("stroke-width",5).lower()}function wt(t,e,r,i,a,n,o,l){t.append("rect",":first-child").attr("id","frame"+l).attr("x",e.x-a).attr("y",e.y-a+2*n).attr("rx",15).attr("ry",15).attr("width",r-2*a).attr("height",i-2*a-n).style("fill","none").style("stroke",o).style("stroke-width",5).lower()}function _t(t,e,r,i,a,n,o,l){t.append("rect",":first-child").attr("id","frame"+l).attr("x",e.x-a).attr("y",e.y-a).attr("rx",15).attr("ry",15).attr("width",r-2*a).attr("height",i-2*a).style("fill","none").style("stroke",o).style("stroke-width",5).lower()}var Nt={data:function(){return{skemaVersion:"",url:"",blockStyle:{backgroundColor:"rgba(255, 255, 120, 0.5)",height:"90vh",width:"100%"},selectedOption:null,options:[{text:"Clay1",value:"https://raw.githubusercontent.com/hconhisway/webcrawler/master/get_beta--Gromet-FN-auto2.json"},{text:"core_dynamics",value:"https://raw.githubusercontent.com/hconhisway/webcrawler/master/core_dynamics_pack2.json"},{text:"while1",value:"https://raw.githubusercontent.com/ml4ai/skema/main/data/gromet/python/while1/FN_0.1.6/while1--Gromet-FN-auto.json"},{text:"cond1",value:"https://raw.githubusercontent.com/hconhisway/webcrawler/master/cond1--Gromet-FN-auto.json"},{text:"fun1",value:"https://raw.githubusercontent.com/ml4ai/skema/main/data/gromet/python/fun1/FN_0.1.6/fun1--Gromet-FN-auto.json"},{text:"fun4",value:"https://raw.githubusercontent.com/ml4ai/skema/main/data/gromet/python/fun4/FN_0.1.6/fun4--Gromet-FN-auto.json"},{text:"exp1",value:"https://raw.githubusercontent.com/ml4ai/skema/main/data/gromet/python/exp1/FN_0.1.6/exp1--Gromet-FN-auto.json"},{text:"exp2",value:"https://raw.githubusercontent.com/ml4ai/skema/main/data/gromet/python/exp2/FN_0.1.6/exp2--Gromet-FN-auto.json"},{text:"exp3",value:"https://raw.githubusercontent.com/ml4ai/skema/main/data/gromet/python/exp3/FN_0.1.6/exp3--Gromet-FN-auto.json"},{text:"fun_default1",value:"https://raw.githubusercontent.com/ml4ai/skema/main/data/gromet/python/fun_default1/FN_0.1.6/fun_default1--Gromet-FN-auto.json"},{text:"assign_operator1",value:"https://raw.githubusercontent.com/ml4ai/skema/main/data/gromet/python/assign_operator1/FN_0.1.6/assign_operator1--Gromet-FN-auto.json"}]}},methods:{fetchData:function(){var t=this;l.h("g").remove(),s.a.get(this.selectedOption).then(function(e){var r=e.data;t.skemaVersion=r.schema_version;var i=r.modules[0],a=i.fn,n=i.fn_array;lt(y(a),n,0)}).catch(function(t){console.error(t)})},downloadSVG:function(){var t=document.getElementById("mainsvg"),e=(new XMLSerializer).serializeToString(t),r=new Blob([e],{type:"image/svg+xml;charset=utf-8"}),i=URL.createObjectURL(r),a=document.createElement("a");a.href=i,a.download="mainsvg.svg",document.body.appendChild(a),a.click(),document.body.removeChild(a)},submitUrl:function(){this.excuteFunction(this.url)},excuteFunction:function(t){var e=this;l.h("g").remove(),s.a.get(t).then(function(t){var r=t.data;e.skemaVersion=r.schema_version;var i=r.modules[0],a=i.fn,n=i.fn_array;lt(y(a),n,0)}).catch(function(t){console.error(t)})}}},kt={render:function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"container"},[r("div",{staticClass:"d-flex justify-content-start"},[r("div",{staticClass:"button-spacing"}),t._v(" "),r("select",{directives:[{name:"model",rawName:"v-model",value:t.selectedOption,expression:"selectedOption"}],staticClass:"my-select",attrs:{placeholder:"Select"},on:{change:[function(e){var r=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.selectedOption=e.target.multiple?r:r[0]},t.fetchData]}},t._l(t.options,function(e){return r("option",{key:e.value,domProps:{value:e.value}},[t._v("\n      "+t._s(e.text)+"\n    ")])}),0),t._v(" "),t._m(0),t._v(" "),r("input",{directives:[{name:"model",rawName:"v-model",value:t.url,expression:"url"}],staticClass:"url-input",attrs:{type:"text",placeholder:"Input URL of JSON file here."},domProps:{value:t.url},on:{input:function(e){e.target.composing||(t.url=e.target.value)}}}),t._v(" "),r("button",{staticClass:"btn btn-primary",on:{click:t.submitUrl}},[t._v("Submit")]),t._v(" "),r("button",{staticClass:"btn btn-primary download-button",on:{click:t.downloadSVG}},[t._v("downloadSVG")])]),t._v(" "),r("div",{staticClass:"row"},[r("div",{style:t.blockStyle,attrs:{id:"svg-container"}},[t._m(1),t._v(" "),r("div",{staticClass:"version-text"},[t._v("\n        Current File Version:\n        "),r("span",{staticClass:"highlight"},[t._v(t._s(t.skemaVersion))])]),t._v(" "),r("svg",{attrs:{id:"mainsvg",width:"30000",height:"6000"}},[r("g",{attrs:{id:"sumGroup"}})])])])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("p",[this._v(" Or ")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"version-text"},[this._v("\n        Current Supported Skema Version:\n        "),e("span",{staticClass:"highlight"},[this._v("0.1.6")])])}]};var Et=r("VU/8")(Nt,kt,!1,function(t){r("C1R5")},"data-v-cced9f34",null).exports;i.a.use(o.a);var St=new o.a({routes:[{path:"/",name:"Moviz",component:Et}],mode:"hash"});i.a.config.productionTip=!1,new i.a({el:"#app",router:St,components:{App:n},template:"<App/>"})},"p+Xa":function(t,e){t.exports={name:"d3-flextree",version:"2.1.2",main:"build/d3-flextree.js",module:"index","jsnext:main":"index",author:{name:"Chris Maloney",url:"http://chrismaloney.org"},description:"Flexible tree layout algorithm that allows for variable node sizes.",keywords:["d3","d3-module","layout","tree","hierarchy","d3-hierarchy","plugin","d3-plugin","infovis","visualization","2d"],homepage:"https://github.com/klortho/d3-flextree",license:"WTFPL",repository:{type:"git",url:"https://github.com/klortho/d3-flextree.git"},scripts:{clean:"rm -rf build demo test","build:demo":"rollup -c --environment BUILD:demo","build:dev":"rollup -c --environment BUILD:dev","build:prod":"rollup -c --environment BUILD:prod","build:test":"rollup -c --environment BUILD:test",build:"rollup -c",lint:"eslint index.js src","test:main":"node test/bundle.js","test:browser":"node test/browser-tests.js",test:"npm-run-all test:*",prepare:"npm-run-all clean build lint test"},dependencies:{"d3-hierarchy":"^1.1.5"},devDependencies:{"babel-plugin-external-helpers":"^6.22.0","babel-preset-es2015-rollup":"^3.0.0",d3:"^4.13.0","d3-selection-multi":"^1.0.1",eslint:"^4.19.1",jsdom:"^11.6.2","npm-run-all":"^4.1.2",rollup:"^0.55.3","rollup-plugin-babel":"^2.7.1","rollup-plugin-commonjs":"^8.0.2","rollup-plugin-copy":"^0.2.3","rollup-plugin-json":"^2.3.0","rollup-plugin-node-resolve":"^3.0.2","rollup-plugin-uglify":"^3.0.0","uglify-es":"^3.3.9"}}}},["NHnr"]);
//# sourceMappingURL=app.dc9e280f376764a37e58.js.map